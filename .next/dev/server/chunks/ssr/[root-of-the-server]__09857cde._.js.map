{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/components/figma/ImageWithFallback.tsx"],"sourcesContent":["import React, { useState } from 'react'\n\nconst ERROR_IMG_SRC =\n  'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg=='\n\nexport function ImageWithFallback(props: React.ImgHTMLAttributes<HTMLImageElement>) {\n  const [didError, setDidError] = useState(false)\n\n  const handleError = () => {\n    setDidError(true)\n  }\n\n  const { src, alt, style, className, ...rest } = props\n\n  return didError ? (\n    <div\n      className={`inline-block bg-gray-100 text-center align-middle ${className ?? ''}`}\n      style={style}\n    >\n      <div className=\"flex items-center justify-center w-full h-full\">\n        <img src={ERROR_IMG_SRC} alt=\"Error loading image\" {...rest} data-original-url={src} />\n      </div>\n    </div>\n  ) : (\n    <img src={src} alt={alt} className={className} style={style} {...rest} onError={handleError} />\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,MAAM,gBACJ;AAEK,SAAS,kBAAkB,KAAgD;IAChF,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,MAAM,cAAc;QAClB,YAAY;IACd;IAEA,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,MAAM,GAAG;IAEhD,OAAO,yBACL,8OAAC;QACC,WAAW,CAAC,kDAAkD,EAAE,aAAa,IAAI;QACjF,OAAO;kBAEP,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,KAAK;gBAAe,KAAI;gBAAuB,GAAG,IAAI;gBAAE,qBAAmB;;;;;;;;;;;;;;;6BAIpF,8OAAC;QAAI,KAAK;QAAK,KAAK;QAAK,WAAW;QAAW,OAAO;QAAQ,GAAG,IAAI;QAAE,SAAS;;;;;;AAEpF"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/components/LandingPage.tsx"],"sourcesContent":["'use client';\n\nimport { MapPin, CheckCircle, Clock, Shield, Moon, Sun } from 'lucide-react';\nimport { ImageWithFallback } from './figma/ImageWithFallback';\n\ninterface LandingPageProps {\n  onLogin: () => void;\n  onSignup: () => void;\n  isDarkMode: boolean;\n  toggleDarkMode: () => void;\n}\n\nexport function LandingPage({ onLogin, onSignup, isDarkMode, toggleDarkMode }: LandingPageProps) {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Navigation */}\n      <nav className=\"border-b border-border bg-white dark:bg-card/80 backdrop-blur-sm fixed w-full top-0 z-50\">\n        <div className=\"container mx-auto px-6 py-4 flex justify-between items-center\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\n              <MapPin className=\"w-5 h-5 text-white\" />\n            </div>\n            <span className=\"text-xl text-foreground\">AttendEase</span>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={toggleDarkMode}\n              className=\"p-2 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors\"\n              title={isDarkMode ? 'Light mode' : 'Dark mode'}\n            >\n              {isDarkMode ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n            </button>\n            <button\n              onClick={onLogin}\n              className=\"px-5 py-2 text-foreground hover:bg-secondary rounded-lg transition-colors\"\n            >\n              Log In\n            </button>\n            <button\n              onClick={onSignup}\n              className=\"px-5 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors\"\n            >\n              Sign Up\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      {/* Hero Section */}\n      <section className=\"pt-32 pb-20 px-6\">\n        <div className=\"container mx-auto max-w-6xl\">\n          <div className=\"grid md:grid-cols-2 gap-12 items-center\">\n            <div>\n              <div className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-primary/5 text-primary rounded-full mb-6 border border-primary/10\">\n                <div className=\"w-1.5 h-1.5 bg-primary rounded-full\"></div>\n                <span className=\"text-sm\">GPS-Based Attendance</span>\n              </div>\n              \n              <h1 className=\"text-5xl md:text-6xl text-foreground mb-6 tracking-tight\">\n                Simple attendance tracking\n                <br />\n                <span className=\"text-primary\">based on location</span>\n              </h1>\n              \n              <p className=\"text-xl text-muted-foreground mb-10 leading-relaxed\">\n                Automatically track student attendance when they arrive at class. No manual check-ins required.\n              </p>\n              \n              <div className=\"flex flex-col sm:flex-row gap-4\">\n                <button\n                  onClick={onSignup}\n                  className=\"px-8 py-3.5 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors\"\n                >\n                  Get Started\n                </button>\n                <button\n                  onClick={onLogin}\n                  className=\"px-8 py-3.5 border border-border text-foreground rounded-lg hover:bg-secondary transition-colors\"\n                >\n                  Sign In\n                </button>\n              </div>\n            </div>\n            \n            <div className=\"relative\">\n              <div className=\"rounded-2xl overflow-hidden border border-border shadow-lg\">\n                <ImageWithFallback\n                  src=\"https://images.unsplash.com/photo-1654366698665-e6d611a9aaa9?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxzdHVkZW50cyUyMGNsYXNzcm9vbSUyMGxlYXJuaW5nfGVufDF8fHx8MTc2NjM4NjQ3M3ww&ixlib=rb-4.1.0&q=80&w=1080\"\n                  alt=\"Students in classroom\"\n                  className=\"w-full h-auto object-cover\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Features */}\n      <section className=\"py-20 px-6 bg-secondary/30\">\n        <div className=\"container mx-auto max-w-6xl\">\n          <div className=\"grid md:grid-cols-3 gap-8\">\n            <div className=\"bg-white dark:bg-card p-8 rounded-xl border border-border\">\n              <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4\">\n                <MapPin className=\"w-6 h-6 text-primary\" />\n              </div>\n              <h3 className=\"text-xl mb-3\">Location-Based</h3>\n              <p className=\"text-muted-foreground leading-relaxed\">\n                Students check in automatically when they enter the class boundary\n              </p>\n            </div>\n\n            <div className=\"bg-white dark:bg-card p-8 rounded-xl border border-border\">\n              <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4\">\n                <Clock className=\"w-6 h-6 text-primary\" />\n              </div>\n              <h3 className=\"text-xl mb-3\">Real-Time Tracking</h3>\n              <p className=\"text-muted-foreground leading-relaxed\">\n                View attendance records in real-time with precise timestamps\n              </p>\n            </div>\n\n            <div className=\"bg-white dark:bg-card p-8 rounded-xl border border-border\">\n              <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4\">\n                <CheckCircle className=\"w-6 h-6 text-primary\" />\n              </div>\n              <h3 className=\"text-xl mb-3\">Easy Reports</h3>\n              <p className=\"text-muted-foreground leading-relaxed\">\n                Export attendance data to CSV for record-keeping and analysis\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* How It Works */}\n      <section className=\"py-20 px-6\">\n        <div className=\"container mx-auto max-w-5xl\">\n          <div className=\"text-center mb-16\">\n            <h2 className=\"text-4xl mb-4\">How it works</h2>\n            <p className=\"text-xl text-muted-foreground\">Three simple steps</p>\n          </div>\n          \n          <div className=\"grid md:grid-cols-3 gap-12\">\n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 bg-primary text-white rounded-lg flex items-center justify-center mx-auto mb-4\">\n                1\n              </div>\n              <h3 className=\"text-xl mb-2\">Create Class</h3>\n              <p className=\"text-muted-foreground\">Set location boundaries and share the class code</p>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 bg-primary text-white rounded-lg flex items-center justify-center mx-auto mb-4\">\n                2\n              </div>\n              <h3 className=\"text-xl mb-2\">Students Join</h3>\n              <p className=\"text-muted-foreground\">Students enter the code to join your class</p>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 bg-primary text-white rounded-lg flex items-center justify-center mx-auto mb-4\">\n                3\n              </div>\n              <h3 className=\"text-xl mb-2\">Auto Check-In</h3>\n              <p className=\"text-muted-foreground\">Attendance marked when students arrive at location</p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* CTA */}\n      <section className=\"py-20 px-6 bg-secondary/30\">\n        <div className=\"container mx-auto max-w-3xl text-center\">\n          <h2 className=\"text-4xl mb-6\">Ready to get started?</h2>\n          <p className=\"text-xl text-muted-foreground mb-8\">\n            Join teachers and students using smart attendance tracking\n          </p>\n          <button\n            onClick={onSignup}\n            className=\"px-8 py-3.5 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors\"\n          >\n            Create Your Account\n          </button>\n        </div>\n      </section>\n\n      {/* Footer */}\n      <footer className=\"border-t border-border py-8 px-6\">\n        <div className=\"container mx-auto flex justify-between items-center\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-6 h-6 bg-primary rounded-md flex items-center justify-center\">\n              <MapPin className=\"w-4 h-4 text-white\" />\n            </div>\n            <span className=\"text-muted-foreground\">AttendEase</span>\n          </div>\n          <p className=\"text-sm text-muted-foreground\">© 2024 AttendEase</p>\n        </div>\n      </footer>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 713, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\n// Get your Supabase credentials from https://app.supabase.com\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || '';\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '';\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  console.warn('Missing Supabase credentials. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in your .env.local file');\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\n// Database types\r\nexport interface Database {\r\n  public: {\r\n    Tables: {\r\n      profiles: {\r\n        Row: {\r\n          id: string;\r\n          email: string;\r\n          name: string;\r\n          role: 'teacher' | 'student';\r\n          created_at: string;\r\n          updated_at: string;\r\n        };\r\n        Insert: {\r\n          id: string;\r\n          email: string;\r\n          name: string;\r\n          role: 'teacher' | 'student';\r\n          created_at?: string;\r\n          updated_at?: string;\r\n        };\r\n        Update: {\r\n          id?: string;\r\n          email?: string;\r\n          name?: string;\r\n          role?: 'teacher' | 'student';\r\n          created_at?: string;\r\n          updated_at?: string;\r\n        };\r\n      };\r\n      classes: {\r\n        Row: {\r\n          id: string;\r\n          name: string;\r\n          code: string;\r\n          teacher_id: string;\r\n          location_latitude: number;\r\n          location_longitude: number;\r\n          location_radius: number;\r\n          location_address: string;\r\n          created_at: string;\r\n          updated_at: string;\r\n        };\r\n        Insert: {\r\n          id?: string;\r\n          name: string;\r\n          code: string;\r\n          teacher_id: string;\r\n          location_latitude: number;\r\n          location_longitude: number;\r\n          location_radius: number;\r\n          location_address: string;\r\n          created_at?: string;\r\n          updated_at?: string;\r\n        };\r\n        Update: {\r\n          id?: string;\r\n          name?: string;\r\n          code?: string;\r\n          teacher_id?: string;\r\n          location_latitude?: number;\r\n          location_longitude?: number;\r\n          location_radius?: number;\r\n          location_address?: string;\r\n          created_at?: string;\r\n          updated_at?: string;\r\n        };\r\n      };\r\n      class_enrollments: {\r\n        Row: {\r\n          id: string;\r\n          class_id: string;\r\n          student_id: string;\r\n          enrolled_at: string;\r\n        };\r\n        Insert: {\r\n          id?: string;\r\n          class_id: string;\r\n          student_id: string;\r\n          enrolled_at?: string;\r\n        };\r\n        Update: {\r\n          id?: string;\r\n          class_id?: string;\r\n          student_id?: string;\r\n          enrolled_at?: string;\r\n        };\r\n      };\r\n      attendance_records: {\r\n        Row: {\r\n          id: string;\r\n          class_id: string;\r\n          student_id: string;\r\n          check_in_time: string;\r\n          check_out_time: string | null;\r\n          check_in_latitude: number;\r\n          check_in_longitude: number;\r\n          check_out_latitude: number | null;\r\n          check_out_longitude: number | null;\r\n          created_at: string;\r\n        };\r\n        Insert: {\r\n          id?: string;\r\n          class_id: string;\r\n          student_id: string;\r\n          check_in_time: string;\r\n          check_out_time?: string | null;\r\n          check_in_latitude: number;\r\n          check_in_longitude: number;\r\n          check_out_latitude?: number | null;\r\n          check_out_longitude?: number | null;\r\n          created_at?: string;\r\n        };\r\n        Update: {\r\n          id?: string;\r\n          class_id?: string;\r\n          student_id?: string;\r\n          check_in_time?: string;\r\n          check_out_time?: string | null;\r\n          check_in_latitude?: number;\r\n          check_in_longitude?: number;\r\n          check_out_latitude?: number | null;\r\n          check_out_longitude?: number | null;\r\n          created_at?: string;\r\n        };\r\n      };\r\n    };\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,8DAA8D;AAC9D,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAErE;;AAIO,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 729, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { createContext, useContext, useEffect, useState } from 'react';\r\nimport { User as SupabaseUser, Session } from '@supabase/supabase-js';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { toast } from 'sonner';\r\n\r\nexport interface UserProfile {\r\n  id: string;\r\n  email: string;\r\n  name: string;\r\n  role: 'teacher' | 'student';\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: SupabaseUser | null;\r\n  profile: UserProfile | null;\r\n  session: Session | null;\r\n  loading: boolean;\r\n  signIn: (email: string, password: string) => Promise<void>;\r\n  signUp: (email: string, password: string, name: string, role: 'teacher' | 'student') => Promise<void>;\r\n  signOut: () => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<SupabaseUser | null>(null);\r\n  const [profile, setProfile] = useState<UserProfile | null>(null);\r\n  const [session, setSession] = useState<Session | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Get initial session\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setSession(session);\r\n      setUser(session?.user ?? null);\r\n      if (session?.user) {\r\n        fetchProfile(session.user.id);\r\n      } else {\r\n        setLoading(false);\r\n      }\r\n    });\r\n\r\n    // Listen for auth changes\r\n    const {\r\n      data: { subscription },\r\n    } = supabase.auth.onAuthStateChange((_event, session) => {\r\n      setSession(session);\r\n      setUser(session?.user ?? null);\r\n      if (session?.user) {\r\n        fetchProfile(session.user.id);\r\n      } else {\r\n        setProfile(null);\r\n        setLoading(false);\r\n      }\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  const fetchProfile = async (userId: string) => {\r\n    try {\r\n      console.log('Fetching profile for user:', userId);\r\n      \r\n      const { data, error } = await supabase\r\n        .from('profiles')\r\n        .select('*')\r\n        .eq('id', userId)\r\n        .maybeSingle();\r\n\r\n      console.log('Profile query result:', { data, error });\r\n\r\n      if (error) {\r\n        // If it's the \"multiple rows\" error, try to get just the first one\r\n        if (error.message?.includes('multiple') || error.message?.includes('coerce')) {\r\n          const { data: multiData, error: multiError } = await supabase\r\n            .from('profiles')\r\n            .select('*')\r\n            .eq('id', userId)\r\n            .limit(1);\r\n          \r\n          if (multiError) throw multiError;\r\n          \r\n          const profileData = Array.isArray(multiData) && multiData.length > 0 ? multiData[0] : null;\r\n          \r\n          if (profileData) {\r\n            setProfile({\r\n              id: profileData.id,\r\n              email: profileData.email,\r\n              name: profileData.name,\r\n              role: profileData.role as 'teacher' | 'student',\r\n            });\r\n            console.log('Profile set successfully:', profileData);\r\n            toast.warning('Multiple profiles detected. Please contact support to clean up your account.');\r\n          } else {\r\n            console.log('No profile data found after fallback');\r\n          }\r\n          return;\r\n        }\r\n        throw error;\r\n      }\r\n      \r\n      if (data) {\r\n        setProfile({\r\n          id: data.id,\r\n          email: data.email,\r\n          name: data.name,\r\n          role: data.role as 'teacher' | 'student',\r\n        });\r\n        console.log('Profile set successfully:', data);\r\n      } else {\r\n        console.log('No profile data found - attempting to create profile from user metadata');\r\n        \r\n        // Try to get user metadata\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        \r\n        if (user) {\r\n          const name = user.user_metadata?.name || user.email?.split('@')[0] || 'User';\r\n          const role = user.user_metadata?.role || 'student';\r\n          \r\n          console.log('Creating profile with:', { name, role, email: user.email });\r\n          \r\n          // Create profile\r\n          const { data: newProfile, error: createError } = await supabase\r\n            .from('profiles')\r\n            .insert([{\r\n              id: userId,\r\n              email: user.email!,\r\n              name: name,\r\n              role: role,\r\n            }])\r\n            .select()\r\n            .single();\r\n          \r\n          if (createError) {\r\n            console.error('Failed to create profile:', createError);\r\n            toast.error('Failed to create user profile. Please contact support.');\r\n          } else if (newProfile) {\r\n            setProfile({\r\n              id: newProfile.id,\r\n              email: newProfile.email,\r\n              name: newProfile.name,\r\n              role: newProfile.role as 'teacher' | 'student',\r\n            });\r\n            console.log('Profile created and set:', newProfile);\r\n            toast.success('Profile created successfully!');\r\n          }\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error fetching profile:', error);\r\n      toast.error('Failed to load user profile. Please try logging in again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const signIn = async (email: string, password: string) => {\r\n    try {\r\n      setLoading(true);\r\n      const { data, error } = await supabase.auth.signInWithPassword({\r\n        email,\r\n        password,\r\n      });\r\n\r\n      if (error) {\r\n        console.error('Sign in error:', error);\r\n        \r\n        // Handle specific error cases\r\n        if (error.message.includes('Email not confirmed')) {\r\n          toast.error('Please check your email and confirm your account before signing in.');\r\n        } else if (error.message.includes('Invalid login credentials')) {\r\n          toast.error('Invalid email or password. Please try again.');\r\n        } else {\r\n          toast.error(error.message || 'Failed to sign in');\r\n        }\r\n        throw error;\r\n      }\r\n\r\n      if (data.user) {\r\n        await fetchProfile(data.user.id);\r\n        toast.success('Successfully signed in!');\r\n      }\r\n    } catch (error: any) {\r\n      // Error already handled above\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const signUp = async (email: string, password: string, name: string, role: 'teacher' | 'student') => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Sign up the user\r\n      const { data, error } = await supabase.auth.signUp({\r\n        email,\r\n        password,\r\n        options: {\r\n          data: {\r\n            name,\r\n            role,\r\n          },\r\n          emailRedirectTo: `${window.location.origin}/auth/callback`,\r\n        },\r\n      });\r\n\r\n      if (error) {\r\n        console.error('Signup error details:', error);\r\n        throw error;\r\n      }\r\n\r\n      if (data.user) {\r\n        console.log('User created:', data.user);\r\n        \r\n        // Check if profile already exists\r\n        const { data: existingProfile } = await supabase\r\n          .from('profiles')\r\n          .select('id')\r\n          .eq('id', data.user.id)\r\n          .limit(1);\r\n\r\n        // Only create profile if it doesn't exist\r\n        if (!existingProfile || existingProfile.length === 0) {\r\n          const { error: profileError } = await supabase\r\n            .from('profiles')\r\n            .insert([\r\n              {\r\n                id: data.user.id,\r\n                email,\r\n                name,\r\n                role,\r\n              },\r\n            ]);\r\n\r\n          if (profileError) {\r\n            console.error('Profile creation error:', profileError);\r\n            throw profileError;\r\n          }\r\n        }\r\n\r\n        // Check if email confirmation is required\r\n        if (data.session) {\r\n          // User is auto-confirmed, fetch profile immediately\r\n          await fetchProfile(data.user.id);\r\n          toast.success('Account created successfully!');\r\n        } else {\r\n          // Email confirmation required\r\n          toast.success('Account created! Please check your email to verify your account.');\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Signup error:', error);\r\n      const errorMessage = error?.message || error?.error_description || 'Failed to sign up';\r\n      toast.error(errorMessage);\r\n      throw error;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const signOut = async () => {\r\n    try {\r\n      const { error } = await supabase.auth.signOut();\r\n      if (error) throw error;\r\n      \r\n      setUser(null);\r\n      setProfile(null);\r\n      setSession(null);\r\n      toast.success('Signed out successfully');\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Failed to sign out');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    profile,\r\n    session,\r\n    loading,\r\n    signIn,\r\n    signUp,\r\n    signOut,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AACA;AALA;;;;;AAwBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAsB;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAqB;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAiB;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,sBAAsB;QACtB,kIAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE;YACpD,WAAW;YACX,QAAQ,SAAS,QAAQ;YACzB,IAAI,SAAS,MAAM;gBACjB,aAAa,QAAQ,IAAI,CAAC,EAAE;YAC9B,OAAO;gBACL,WAAW;YACb;QACF;QAEA,0BAA0B;QAC1B,MAAM,EACJ,MAAM,EAAE,YAAY,EAAE,EACvB,GAAG,kIAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,QAAQ;YAC3C,WAAW;YACX,QAAQ,SAAS,QAAQ;YACzB,IAAI,SAAS,MAAM;gBACjB,aAAa,QAAQ,IAAI,CAAC,EAAE;YAC9B,OAAO;gBACL,WAAW;gBACX,WAAW;YACb;QACF;QAEA,OAAO,IAAM,aAAa,WAAW;IACvC,GAAG,EAAE;IAEL,MAAM,eAAe,OAAO;QAC1B,IAAI;YACF,QAAQ,GAAG,CAAC,8BAA8B;YAE1C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,kIAAQ,CACnC,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,QACT,WAAW;YAEd,QAAQ,GAAG,CAAC,yBAAyB;gBAAE;gBAAM;YAAM;YAEnD,IAAI,OAAO;gBACT,mEAAmE;gBACnE,IAAI,MAAM,OAAO,EAAE,SAAS,eAAe,MAAM,OAAO,EAAE,SAAS,WAAW;oBAC5E,MAAM,EAAE,MAAM,SAAS,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,kIAAQ,CAC1D,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,QACT,KAAK,CAAC;oBAET,IAAI,YAAY,MAAM;oBAEtB,MAAM,cAAc,MAAM,OAAO,CAAC,cAAc,UAAU,MAAM,GAAG,IAAI,SAAS,CAAC,EAAE,GAAG;oBAEtF,IAAI,aAAa;wBACf,WAAW;4BACT,IAAI,YAAY,EAAE;4BAClB,OAAO,YAAY,KAAK;4BACxB,MAAM,YAAY,IAAI;4BACtB,MAAM,YAAY,IAAI;wBACxB;wBACA,QAAQ,GAAG,CAAC,6BAA6B;wBACzC,iJAAK,CAAC,OAAO,CAAC;oBAChB,OAAO;wBACL,QAAQ,GAAG,CAAC;oBACd;oBACA;gBACF;gBACA,MAAM;YACR;YAEA,IAAI,MAAM;gBACR,WAAW;oBACT,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,MAAM,KAAK,IAAI;gBACjB;gBACA,QAAQ,GAAG,CAAC,6BAA6B;YAC3C,OAAO;gBACL,QAAQ,GAAG,CAAC;gBAEZ,2BAA2B;gBAC3B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,kIAAQ,CAAC,IAAI,CAAC,OAAO;gBAEtD,IAAI,MAAM;oBACR,MAAM,OAAO,KAAK,aAAa,EAAE,QAAQ,KAAK,KAAK,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI;oBACtE,MAAM,OAAO,KAAK,aAAa,EAAE,QAAQ;oBAEzC,QAAQ,GAAG,CAAC,0BAA0B;wBAAE;wBAAM;wBAAM,OAAO,KAAK,KAAK;oBAAC;oBAEtE,iBAAiB;oBACjB,MAAM,EAAE,MAAM,UAAU,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,kIAAQ,CAC5D,IAAI,CAAC,YACL,MAAM,CAAC;wBAAC;4BACP,IAAI;4BACJ,OAAO,KAAK,KAAK;4BACjB,MAAM;4BACN,MAAM;wBACR;qBAAE,EACD,MAAM,GACN,MAAM;oBAET,IAAI,aAAa;wBACf,QAAQ,KAAK,CAAC,6BAA6B;wBAC3C,iJAAK,CAAC,KAAK,CAAC;oBACd,OAAO,IAAI,YAAY;wBACrB,WAAW;4BACT,IAAI,WAAW,EAAE;4BACjB,OAAO,WAAW,KAAK;4BACvB,MAAM,WAAW,IAAI;4BACrB,MAAM,WAAW,IAAI;wBACvB;wBACA,QAAQ,GAAG,CAAC,4BAA4B;wBACxC,iJAAK,CAAC,OAAO,CAAC;oBAChB;gBACF;YACF;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,2BAA2B;YACzC,iJAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,SAAS,OAAO,OAAe;QACnC,IAAI;YACF,WAAW;YACX,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,kIAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;gBAC7D;gBACA;YACF;YAEA,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,kBAAkB;gBAEhC,8BAA8B;gBAC9B,IAAI,MAAM,OAAO,CAAC,QAAQ,CAAC,wBAAwB;oBACjD,iJAAK,CAAC,KAAK,CAAC;gBACd,OAAO,IAAI,MAAM,OAAO,CAAC,QAAQ,CAAC,8BAA8B;oBAC9D,iJAAK,CAAC,KAAK,CAAC;gBACd,OAAO;oBACL,iJAAK,CAAC,KAAK,CAAC,MAAM,OAAO,IAAI;gBAC/B;gBACA,MAAM;YACR;YAEA,IAAI,KAAK,IAAI,EAAE;gBACb,MAAM,aAAa,KAAK,IAAI,CAAC,EAAE;gBAC/B,iJAAK,CAAC,OAAO,CAAC;YAChB;QACF,EAAE,OAAO,OAAY;YACnB,8BAA8B;YAC9B,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,SAAS,OAAO,OAAe,UAAkB,MAAc;QACnE,IAAI;YACF,WAAW;YAEX,mBAAmB;YACnB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,kIAAQ,CAAC,IAAI,CAAC,MAAM,CAAC;gBACjD;gBACA;gBACA,SAAS;oBACP,MAAM;wBACJ;wBACA;oBACF;oBACA,iBAAiB,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;gBAC5D;YACF;YAEA,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,yBAAyB;gBACvC,MAAM;YACR;YAEA,IAAI,KAAK,IAAI,EAAE;gBACb,QAAQ,GAAG,CAAC,iBAAiB,KAAK,IAAI;gBAEtC,kCAAkC;gBAClC,MAAM,EAAE,MAAM,eAAe,EAAE,GAAG,MAAM,kIAAQ,CAC7C,IAAI,CAAC,YACL,MAAM,CAAC,MACP,EAAE,CAAC,MAAM,KAAK,IAAI,CAAC,EAAE,EACrB,KAAK,CAAC;gBAET,0CAA0C;gBAC1C,IAAI,CAAC,mBAAmB,gBAAgB,MAAM,KAAK,GAAG;oBACpD,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,kIAAQ,CAC3C,IAAI,CAAC,YACL,MAAM,CAAC;wBACN;4BACE,IAAI,KAAK,IAAI,CAAC,EAAE;4BAChB;4BACA;4BACA;wBACF;qBACD;oBAEH,IAAI,cAAc;wBAChB,QAAQ,KAAK,CAAC,2BAA2B;wBACzC,MAAM;oBACR;gBACF;gBAEA,0CAA0C;gBAC1C,IAAI,KAAK,OAAO,EAAE;oBAChB,oDAAoD;oBACpD,MAAM,aAAa,KAAK,IAAI,CAAC,EAAE;oBAC/B,iJAAK,CAAC,OAAO,CAAC;gBAChB,OAAO;oBACL,8BAA8B;oBAC9B,iJAAK,CAAC,OAAO,CAAC;gBAChB;YACF;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,MAAM,eAAe,OAAO,WAAW,OAAO,qBAAqB;YACnE,iJAAK,CAAC,KAAK,CAAC;YACZ,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,UAAU;QACd,IAAI;YACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,kIAAQ,CAAC,IAAI,CAAC,OAAO;YAC7C,IAAI,OAAO,MAAM;YAEjB,QAAQ;YACR,WAAW;YACX,WAAW;YACX,iJAAK,CAAC,OAAO,CAAC;QAChB,EAAE,OAAO,OAAY;YACnB,iJAAK,CAAC,KAAK,CAAC,MAAM,OAAO,IAAI;YAC7B,MAAM;QACR;IACF;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBAAO,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 984, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/components/LoginPage.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { MapPin, ArrowLeft, Moon, Sun } from 'lucide-react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { toast } from 'sonner';\n\ninterface LoginPageProps {\n  onBack: () => void;\n  onSignup: () => void;\n  isDarkMode: boolean;\n  toggleDarkMode: () => void;\n}\n\nexport function LoginPage({ onBack, onSignup, isDarkMode, toggleDarkMode }: LoginPageProps) {\n  const { signIn } = useAuth();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await signIn(email, password);\n      // Navigation is handled automatically by AuthContext\n    } catch (error) {\n      // Error toast is already shown by AuthContext\n      console.error('Login error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center px-6\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <button\n            onClick={onBack}\n            className=\"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            <span>Back</span>\n          </button>\n          <button\n            onClick={toggleDarkMode}\n            className=\"p-2 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors\"\n            title={isDarkMode ? 'Light mode' : 'Dark mode'}\n          >\n            {isDarkMode ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n          </button>\n        </div>\n\n        <div className=\"bg-white dark:bg-card rounded-2xl shadow-sm border border-border p-8\">\n          {/* Logo */}\n          <div className=\"flex items-center justify-center mb-8\">\n            <div className=\"w-12 h-12 bg-primary rounded-lg flex items-center justify-center\">\n              <MapPin className=\"w-6 h-6 text-white\" />\n            </div>\n          </div>\n\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-3xl mb-2\">Welcome back</h1>\n            <p className=\"text-muted-foreground\">Sign in to your account</p>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\n            {/* Email */}\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm mb-2\">\n                Email\n              </label>\n              <input\n                id=\"email\"\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                placeholder=\"you@example.com\"\n                required\n                disabled={isLoading}\n                className=\"w-full px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all disabled:opacity-50\"\n              />\n            </div>\n\n            {/* Password */}\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm mb-2\">\n                Password\n              </label>\n              <input\n                id=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder=\"••••••••\"\n                required\n                disabled={isLoading}\n                className=\"w-full px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all disabled:opacity-50\"\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? 'Signing in...' : 'Sign In'}\n            </button>\n          </form>\n\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-muted-foreground\">\n              Don't have an account?{' '}\n              <button\n                onClick={onSignup}\n                className=\"text-primary hover:underline\"\n              >\n                Sign up\n              </button>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAJA;;;;;AAcO,SAAS,UAAU,EAAE,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,cAAc,EAAkB;IACxF,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,0IAAO;IAC1B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,aAAa;QAEb,IAAI;YACF,MAAM,OAAO,OAAO;QACpB,qDAAqD;QACvD,EAAE,OAAO,OAAO;YACd,8CAA8C;YAC9C,QAAQ,KAAK,CAAC,gBAAgB;QAChC,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS;4BACT,WAAU;;8CAEV,8OAAC,6NAAS;oCAAC,WAAU;;;;;;8CACrB,8OAAC;8CAAK;;;;;;;;;;;;sCAER,8OAAC;4BACC,SAAS;4BACT,WAAU;4BACV,OAAO,aAAa,eAAe;sCAElC,2BAAa,8OAAC,uMAAG;gCAAC,WAAU;;;;;qDAAe,8OAAC,0MAAI;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAIhE,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,oNAAM;oCAAC,WAAU;;;;;;;;;;;;;;;;sCAItB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAgB;;;;;;8CAC9B,8OAAC;oCAAE,WAAU;8CAAwB;;;;;;;;;;;;sCAGvC,8OAAC;4BAAK,UAAU;4BAAc,WAAU;;8CAEtC,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAQ,WAAU;sDAAqB;;;;;;sDAGtD,8OAAC;4CACC,IAAG;4CACH,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4CACxC,aAAY;4CACZ,QAAQ;4CACR,UAAU;4CACV,WAAU;;;;;;;;;;;;8CAKd,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAW,WAAU;sDAAqB;;;;;;sDAGzD,8OAAC;4CACC,IAAG;4CACH,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC3C,aAAY;4CACZ,QAAQ;4CACR,UAAU;4CACV,WAAU;;;;;;;;;;;;8CAId,8OAAC;oCACC,MAAK;oCACL,UAAU;oCACV,WAAU;8CAET,YAAY,kBAAkB;;;;;;;;;;;;sCAInC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAE,WAAU;;oCAAgC;oCACpB;kDACvB,8OAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf"}},
    {"offset": {"line": 1258, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/components/SignupPage.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { MapPin, ArrowLeft, Moon, Sun } from 'lucide-react';\nimport { useAuth } from '@/contexts/AuthContext';\n\ninterface SignupPageProps {\n  onBack: () => void;\n  onLogin: () => void;\n  isDarkMode: boolean;\n  toggleDarkMode: () => void;\n}\n\nexport function SignupPage({ onBack, onLogin, isDarkMode, toggleDarkMode }: SignupPageProps) {\n  const { signUp } = useAuth();\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState<'teacher' | 'student'>('student');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await signUp(email, password, name, role);\n      // Navigation is handled automatically by AuthContext\n    } catch (error) {\n      // Error toast is already shown by AuthContext\n      console.error('Signup error:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background flex items-center justify-center px-6 py-12\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <button\n            onClick={onBack}\n            className=\"flex items-center gap-2 text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            <ArrowLeft className=\"w-4 h-4\" />\n            <span>Back</span>\n          </button>\n          <button\n            onClick={toggleDarkMode}\n            className=\"p-2 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors\"\n            title={isDarkMode ? 'Light mode' : 'Dark mode'}\n          >\n            {isDarkMode ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n          </button>\n        </div>\n\n        <div className=\"bg-white dark:bg-card rounded-2xl shadow-sm border border-border p-8\">\n          {/* Logo */}\n          <div className=\"flex items-center justify-center mb-8\">\n            <div className=\"w-12 h-12 bg-primary rounded-lg flex items-center justify-center\">\n              <MapPin className=\"w-6 h-6 text-white\" />\n            </div>\n          </div>\n\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-3xl mb-2\">Create account</h1>\n            <p className=\"text-muted-foreground\">Get started with AttendEase</p>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\n            {/* Role Selection */}\n            <div>\n              <label className=\"block text-sm mb-3\">I am a</label>\n              <div className=\"grid grid-cols-2 gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setRole('student')}\n                  className={`p-4 rounded-lg border transition-all ${\n                    role === 'student'\n                      ? 'border-primary bg-primary/5 text-primary'\n                      : 'border-border text-muted-foreground hover:border-muted-foreground/40'\n                  }`}\n                >\n                  Student\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setRole('teacher')}\n                  className={`p-4 rounded-lg border transition-all ${\n                    role === 'teacher'\n                      ? 'border-primary bg-primary/5 text-primary'\n                      : 'border-border text-muted-foreground hover:border-muted-foreground/40'\n                  }`}\n                >\n                  Teacher\n                </button>\n              </div>\n            </div>\n\n            {/* Name */}\n            <div>\n              <label htmlFor=\"name\" className=\"block text-sm mb-2\">\n                Full Name\n              </label>\n              <input\n                id=\"name\"\n                type=\"text\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                placeholder=\"John Doe\"\n                required\n                disabled={isLoading}\n                className=\"w-full px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all disabled:opacity-50\"\n              />\n            </div>\n\n            {/* Email */}\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm mb-2\">\n                Email\n              </label>\n              <input\n                id=\"email\"\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                placeholder=\"you@example.com\"\n                required\n                disabled={isLoading}\n                className=\"w-full px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all disabled:opacity-50\"\n              />\n            </div>\n\n            {/* Password */}\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm mb-2\">\n                Password\n              </label>\n              <input\n                id=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder=\"••••••••\"\n                required\n                minLength={6}\n                disabled={isLoading}\n                className=\"w-full px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all disabled:opacity-50\"\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? 'Creating Account...' : 'Create Account'}\n            </button>\n          </form>\n\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-muted-foreground\">\n              Already have an account?{' '}\n              <button\n                onClick={onLogin}\n                className=\"text-primary hover:underline\"\n              >\n                Sign in\n              </button>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAJA;;;;;AAaO,SAAS,WAAW,EAAE,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,cAAc,EAAmB;IACzF,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,0IAAO;IAC1B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAwB;IACxD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,aAAa;QAEb,IAAI;YACF,MAAM,OAAO,OAAO,UAAU,MAAM;QACpC,qDAAqD;QACvD,EAAE,OAAO,OAAO;YACd,8CAA8C;YAC9C,QAAQ,KAAK,CAAC,iBAAiB;QACjC,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS;4BACT,WAAU;;8CAEV,8OAAC,6NAAS;oCAAC,WAAU;;;;;;8CACrB,8OAAC;8CAAK;;;;;;;;;;;;sCAER,8OAAC;4BACC,SAAS;4BACT,WAAU;4BACV,OAAO,aAAa,eAAe;sCAElC,2BAAa,8OAAC,uMAAG;gCAAC,WAAU;;;;;qDAAe,8OAAC,0MAAI;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAIhE,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,oNAAM;oCAAC,WAAU;;;;;;;;;;;;;;;;sCAItB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAU;8CAAgB;;;;;;8CAC9B,8OAAC;oCAAE,WAAU;8CAAwB;;;;;;;;;;;;sCAGvC,8OAAC;4BAAK,UAAU;4BAAc,WAAU;;8CAEtC,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;sDAAqB;;;;;;sDACtC,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDACC,MAAK;oDACL,SAAS,IAAM,QAAQ;oDACvB,WAAW,CAAC,qCAAqC,EAC/C,SAAS,YACL,6CACA,wEACJ;8DACH;;;;;;8DAGD,8OAAC;oDACC,MAAK;oDACL,SAAS,IAAM,QAAQ;oDACvB,WAAW,CAAC,qCAAqC,EAC/C,SAAS,YACL,6CACA,wEACJ;8DACH;;;;;;;;;;;;;;;;;;8CAOL,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAO,WAAU;sDAAqB;;;;;;sDAGrD,8OAAC;4CACC,IAAG;4CACH,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;4CACvC,aAAY;4CACZ,QAAQ;4CACR,UAAU;4CACV,WAAU;;;;;;;;;;;;8CAKd,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAQ,WAAU;sDAAqB;;;;;;sDAGtD,8OAAC;4CACC,IAAG;4CACH,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4CACxC,aAAY;4CACZ,QAAQ;4CACR,UAAU;4CACV,WAAU;;;;;;;;;;;;8CAKd,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAW,WAAU;sDAAqB;;;;;;sDAGzD,8OAAC;4CACC,IAAG;4CACH,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC3C,aAAY;4CACZ,QAAQ;4CACR,WAAW;4CACX,UAAU;4CACV,WAAU;;;;;;;;;;;;8CAId,8OAAC;oCACC,MAAK;oCACL,UAAU;oCACV,WAAU;8CAET,YAAY,wBAAwB;;;;;;;;;;;;sCAIzC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAE,WAAU;;oCAAgC;oCAClB;kDACzB,8OAAC;wCACC,SAAS;wCACT,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf"}},
    {"offset": {"line": 1617, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/components/CreateClassModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { X, MapPin, MapIcon } from 'lucide-react';\nimport { toast } from 'sonner';\nimport dynamic from 'next/dynamic';\n\n// Dynamically import the map component to avoid SSR issues\nconst LocationPicker = dynamic(() => import('./LocationPicker'), {\n  ssr: false,\n  loading: () => <div className=\"h-96 bg-secondary rounded-lg animate-pulse\" />\n});\n\ninterface CreateClassModalProps {\n  onClose: () => void;\n  onCreate: (classData: {\n    name: string;\n    code: string;\n    location: {\n      latitude: number;\n      longitude: number;\n      radius: number;\n      address: string;\n    };\n  }) => void;\n}\n\nexport function CreateClassModal({ onClose, onCreate }: CreateClassModalProps) {\n  const [name, setName] = useState('');\n  const [code, setCode] = useState('');\n  const [address, setAddress] = useState('');\n  const [latitude, setLatitude] = useState('');\n  const [longitude, setLongitude] = useState('');\n  const [radius, setRadius] = useState('100');\n  const [loadingLocation, setLoadingLocation] = useState(false);\n  const [showMap, setShowMap] = useState(false);\n\n  useEffect(() => {\n    // Try to get reverse geocoded address when coordinates change\n    if (latitude && longitude && !address) {\n      reverseGeocode(parseFloat(latitude), parseFloat(longitude));\n    }\n  }, [latitude, longitude]);\n\n  const reverseGeocode = async (lat: number, lng: number) => {\n    try {\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`\n      );\n      const data = await response.json();\n      if (data.display_name) {\n        setAddress(data.display_name);\n      }\n    } catch (error) {\n      console.error('Reverse geocoding failed:', error);\n    }\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onCreate({\n      name,\n      code: code || generateCode(),\n      location: {\n        latitude: parseFloat(latitude) || 0,\n        longitude: parseFloat(longitude) || 0,\n        radius: parseFloat(radius),\n        address\n      }\n    });\n  };\n\n  const generateCode = () => {\n    return Math.random().toString(36).substring(2, 8).toUpperCase();\n  };\n\n  const handleUseCurrentLocation = () => {\n    if (!navigator.geolocation) {\n      toast.error('Geolocation is not supported by your browser');\n      return;\n    }\n\n    setLoadingLocation(true);\n    toast.info('Requesting location permission...');\n    \n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        const lat = position.coords.latitude.toFixed(6);\n        const lng = position.coords.longitude.toFixed(6);\n        setLatitude(lat);\n        setLongitude(lng);\n        setLoadingLocation(false);\n        toast.success('Location captured successfully!');\n        reverseGeocode(parseFloat(lat), parseFloat(lng));\n      },\n      (error) => {\n        setLoadingLocation(false);\n        let errorMessage = 'Unable to get current location. ';\n        \n        switch(error.code) {\n          case error.PERMISSION_DENIED:\n            errorMessage = 'Location permission denied. Please enable location access in your browser settings.';\n            break;\n          case error.POSITION_UNAVAILABLE:\n            errorMessage = 'Location information is unavailable. Please try again.';\n            break;\n          case error.TIMEOUT:\n            errorMessage = 'Location request timed out. Please try again.';\n            break;\n          default:\n            errorMessage = 'An unknown error occurred. Please enter coordinates manually.';\n        }\n        \n        console.error('Geolocation error:', error);\n        toast.error(errorMessage);\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 15000,\n        maximumAge: 0\n      }\n    );\n  };\n\n  const handleMapLocationSelect = (lat: number, lng: number) => {\n    setLatitude(lat.toFixed(6));\n    setLongitude(lng.toFixed(6));\n    setShowMap(false);\n    toast.success('Location selected from map');\n    reverseGeocode(lat, lng);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-6 z-50\">\n      <div className=\"bg-white dark:bg-card rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"sticky top-0 bg-white dark:bg-card border-b border-border px-6 py-4 flex justify-between items-center rounded-t-2xl\">\n          <h2 className=\"text-2xl\">Create New Class</h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-secondary rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-5\">\n          {/* Class Name */}\n          <div>\n            <label htmlFor=\"className\" className=\"block text-sm mb-2\">\n              Class Name\n            </label>\n            <input\n              id=\"className\"\n              type=\"text\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              placeholder=\"e.g., Computer Science 101\"\n              required\n              className=\"w-full px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary\"\n            />\n          </div>\n\n          {/* Class Code */}\n          <div>\n            <label htmlFor=\"classCode\" className=\"block text-sm mb-2\">\n              Class Code (Optional)\n            </label>\n            <div className=\"flex gap-3\">\n              <input\n                id=\"classCode\"\n                type=\"text\"\n                value={code}\n                onChange={(e) => setCode(e.target.value.toUpperCase())}\n                placeholder=\"Auto-generated if left empty\"\n                className=\"flex-1 px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setCode(generateCode())}\n                className=\"px-6 py-3 bg-primary/5 border border-primary/20 text-primary rounded-lg hover:bg-primary/10 transition-colors\"\n              >\n                Generate\n              </button>\n            </div>\n          </div>\n\n          {/* Location Section */}\n          <div className=\"border-t border-border pt-5\">\n            <div className=\"flex items-center gap-2 mb-4\">\n              <div className=\"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center\">\n                <MapPin className=\"w-4 h-4 text-primary\" />\n              </div>\n              <h3 className=\"text-lg\">Class Location</h3>\n            </div>\n\n            {/* Address */}\n            <div className=\"mb-4\">\n              <label htmlFor=\"address\" className=\"block text-sm mb-2\">\n                Location Address\n              </label>\n              <input\n                id=\"address\"\n                type=\"text\"\n                value={address}\n                onChange={(e) => setAddress(e.target.value)}\n                placeholder=\"e.g., Room 205, Main Building\"\n                required\n                className=\"w-full px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary\"\n              />\n            </div>\n\n            {/* Coordinates */}\n            <div className=\"grid md:grid-cols-2 gap-4 mb-4\">\n              <div>\n                <label htmlFor=\"latitude\" className=\"block text-sm mb-2\">\n                  Latitude\n                </label>\n                <input\n                  id=\"latitude\"\n                  type=\"number\"\n                  step=\"any\"\n                  value={latitude}\n                  onChange={(e) => setLatitude(e.target.value)}\n                  placeholder=\"e.g., 40.7128\"\n                  required\n                  className=\"w-full px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary\"\n                />\n              </div>\n              <div>\n                <label htmlFor=\"longitude\" className=\"block text-sm mb-2\">\n                  Longitude\n                </label>\n                <input\n                  id=\"longitude\"\n                  type=\"number\"\n                  step=\"any\"\n                  value={longitude}\n                  onChange={(e) => setLongitude(e.target.value)}\n                  placeholder=\"e.g., -74.0060\"\n                  required\n                  className=\"w-full px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary\"\n                />\n              </div>\n            </div>\n\n            {/* Location Buttons */}\n            <div className=\"flex gap-3 mb-4\">\n              <button\n                type=\"button\"\n                onClick={handleUseCurrentLocation}\n                disabled={loadingLocation}\n                className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm bg-primary/5 text-primary border border-primary/20 rounded-lg hover:bg-primary/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <MapPin className={`w-4 h-4 ${loadingLocation ? 'animate-pulse' : ''}`} />\n                {loadingLocation ? 'Getting location...' : 'Use Current Location'}\n              </button>\n              \n              <button\n                type=\"button\"\n                onClick={() => setShowMap(true)}\n                className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 text-sm bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors\"\n              >\n                <MapIcon className=\"w-4 h-4\" />\n                Choose from Map\n              </button>\n            </div>\n\n            {/* Map Modal */}\n            {showMap && (\n              <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-6 z-[60]\">\n                <div className=\"bg-white dark:bg-card rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden\">\n                  <div className=\"px-6 py-4 border-b border-border flex justify-between items-center\">\n                    <h3 className=\"text-xl\">Select Location on Map</h3>\n                    <button\n                      onClick={() => setShowMap(false)}\n                      className=\"p-2 hover:bg-secondary rounded-lg transition-colors\"\n                    >\n                      <X className=\"w-5 h-5\" />\n                    </button>\n                  </div>\n                  <div className=\"p-6\">\n                    <LocationPicker\n                      key={Date.now()}\n                      initialLat={latitude ? parseFloat(latitude) : undefined}\n                      initialLng={longitude ? parseFloat(longitude) : undefined}\n                      onLocationSelect={handleMapLocationSelect}\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Radius */}\n            <div>\n              <label htmlFor=\"radius\" className=\"block text-sm mb-2\">\n                Check-in Radius (meters)\n              </label>\n              <input\n                id=\"radius\"\n                type=\"number\"\n                value={radius}\n                onChange={(e) => setRadius(e.target.value)}\n                placeholder=\"100\"\n                required\n                min=\"10\"\n                max=\"1000\"\n                className=\"w-full px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary\"\n              />\n              <p className=\"text-sm text-muted-foreground mt-2\">\n                Students must be within this distance to check in\n              </p>\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-3 pt-5 border-t border-border\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 px-6 py-3 bg-secondary text-foreground rounded-lg hover:bg-secondary/80 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors\"\n            >\n              Create Class\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AACA;;AALA;;;;;;AAOA,2DAA2D;AAC3D,MAAM,iBAAiB,IAAA,0KAAO;;;;;;IAC5B,KAAK;IACL,SAAS,kBAAM,8OAAC;YAAI,WAAU;;;;;;;AAiBzB,SAAS,iBAAiB,EAAE,OAAO,EAAE,QAAQ,EAAyB;IAC3E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,8DAA8D;QAC9D,IAAI,YAAY,aAAa,CAAC,SAAS;YACrC,eAAe,WAAW,WAAW,WAAW;QAClD;IACF,GAAG;QAAC;QAAU;KAAU;IAExB,MAAM,iBAAiB,OAAO,KAAa;QACzC,IAAI;YACF,MAAM,WAAW,MAAM,MACrB,CAAC,4DAA4D,EAAE,IAAI,KAAK,EAAE,KAAK;YAEjF,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,IAAI,KAAK,YAAY,EAAE;gBACrB,WAAW,KAAK,YAAY;YAC9B;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;QAC7C;IACF;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,SAAS;YACP;YACA,MAAM,QAAQ;YACd,UAAU;gBACR,UAAU,WAAW,aAAa;gBAClC,WAAW,WAAW,cAAc;gBACpC,QAAQ,WAAW;gBACnB;YACF;QACF;IACF;IAEA,MAAM,eAAe;QACnB,OAAO,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,GAAG,WAAW;IAC/D;IAEA,MAAM,2BAA2B;QAC/B,IAAI,CAAC,UAAU,WAAW,EAAE;YAC1B,iJAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,mBAAmB;QACnB,iJAAK,CAAC,IAAI,CAAC;QAEX,UAAU,WAAW,CAAC,kBAAkB,CACtC,CAAC;YACC,MAAM,MAAM,SAAS,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC;YAC7C,MAAM,MAAM,SAAS,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC;YAC9C,YAAY;YACZ,aAAa;YACb,mBAAmB;YACnB,iJAAK,CAAC,OAAO,CAAC;YACd,eAAe,WAAW,MAAM,WAAW;QAC7C,GACA,CAAC;YACC,mBAAmB;YACnB,IAAI,eAAe;YAEnB,OAAO,MAAM,IAAI;gBACf,KAAK,MAAM,iBAAiB;oBAC1B,eAAe;oBACf;gBACF,KAAK,MAAM,oBAAoB;oBAC7B,eAAe;oBACf;gBACF,KAAK,MAAM,OAAO;oBAChB,eAAe;oBACf;gBACF;oBACE,eAAe;YACnB;YAEA,QAAQ,KAAK,CAAC,sBAAsB;YACpC,iJAAK,CAAC,KAAK,CAAC;QACd,GACA;YACE,oBAAoB;YACpB,SAAS;YACT,YAAY;QACd;IAEJ;IAEA,MAAM,0BAA0B,CAAC,KAAa;QAC5C,YAAY,IAAI,OAAO,CAAC;QACxB,aAAa,IAAI,OAAO,CAAC;QACzB,WAAW;QACX,iJAAK,CAAC,OAAO,CAAC;QACd,eAAe,KAAK;IACtB;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAW;;;;;;sCACzB,8OAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,8OAAC,iMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAIjB,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCAEtC,8OAAC;;8CACC,8OAAC;oCAAM,SAAQ;oCAAY,WAAU;8CAAqB;;;;;;8CAG1D,8OAAC;oCACC,IAAG;oCACH,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oCACvC,aAAY;oCACZ,QAAQ;oCACR,WAAU;;;;;;;;;;;;sCAKd,8OAAC;;8CACC,8OAAC;oCAAM,SAAQ;oCAAY,WAAU;8CAAqB;;;;;;8CAG1D,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,IAAG;4CACH,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,WAAW;4CACnD,aAAY;4CACZ,WAAU;;;;;;sDAEZ,8OAAC;4CACC,MAAK;4CACL,SAAS,IAAM,QAAQ;4CACvB,WAAU;sDACX;;;;;;;;;;;;;;;;;;sCAOL,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,oNAAM;gDAAC,WAAU;;;;;;;;;;;sDAEpB,8OAAC;4CAAG,WAAU;sDAAU;;;;;;;;;;;;8CAI1B,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAM,SAAQ;4CAAU,WAAU;sDAAqB;;;;;;sDAGxD,8OAAC;4CACC,IAAG;4CACH,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;4CAC1C,aAAY;4CACZ,QAAQ;4CACR,WAAU;;;;;;;;;;;;8CAKd,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;;8DACC,8OAAC;oDAAM,SAAQ;oDAAW,WAAU;8DAAqB;;;;;;8DAGzD,8OAAC;oDACC,IAAG;oDACH,MAAK;oDACL,MAAK;oDACL,OAAO;oDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oDAC3C,aAAY;oDACZ,QAAQ;oDACR,WAAU;;;;;;;;;;;;sDAGd,8OAAC;;8DACC,8OAAC;oDAAM,SAAQ;oDAAY,WAAU;8DAAqB;;;;;;8DAG1D,8OAAC;oDACC,IAAG;oDACH,MAAK;oDACL,MAAK;oDACL,OAAO;oDACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;oDAC5C,aAAY;oDACZ,QAAQ;oDACR,WAAU;;;;;;;;;;;;;;;;;;8CAMhB,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,MAAK;4CACL,SAAS;4CACT,UAAU;4CACV,WAAU;;8DAEV,8OAAC,oNAAM;oDAAC,WAAW,CAAC,QAAQ,EAAE,kBAAkB,kBAAkB,IAAI;;;;;;gDACrE,kBAAkB,wBAAwB;;;;;;;sDAG7C,8OAAC;4CACC,MAAK;4CACL,SAAS,IAAM,WAAW;4CAC1B,WAAU;;8DAEV,8OAAC,+MAAO;oDAAC,WAAU;;;;;;gDAAY;;;;;;;;;;;;;gCAMlC,yBACC,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAG,WAAU;kEAAU;;;;;;kEACxB,8OAAC;wDACC,SAAS,IAAM,WAAW;wDAC1B,WAAU;kEAEV,cAAA,8OAAC,iMAAC;4DAAC,WAAU;;;;;;;;;;;;;;;;;0DAGjB,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDAEC,YAAY,WAAW,WAAW,YAAY;oDAC9C,YAAY,YAAY,WAAW,aAAa;oDAChD,kBAAkB;mDAHb,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;8CAWvB,8OAAC;;sDACC,8OAAC;4CAAM,SAAQ;4CAAS,WAAU;sDAAqB;;;;;;sDAGvD,8OAAC;4CACC,IAAG;4CACH,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;4CACzC,aAAY;4CACZ,QAAQ;4CACR,KAAI;4CACJ,KAAI;4CACJ,WAAU;;;;;;sDAEZ,8OAAC;4CAAE,WAAU;sDAAqC;;;;;;;;;;;;;;;;;;sCAOtD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}},
    {"offset": {"line": 2205, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/components/ClassCard.tsx"],"sourcesContent":["'use client';\n\nimport { MapPin, Users, Calendar, BarChart3, Copy } from 'lucide-react';\nimport { toast } from 'sonner';\n\ninterface ClassCardProps {\n  classData: {\n    id: string;\n    name: string;\n    code: string;\n    location: {\n      latitude: number;\n      longitude: number;\n      radius: number;\n      address: string;\n    };\n    studentCount: number;\n  };\n  onViewReport: () => void;\n}\n\nexport function ClassCard({ classData, onViewReport }: ClassCardProps) {\n  const handleCopyCode = () => {\n    navigator.clipboard.writeText(classData.code);\n    toast.success('Class code copied to clipboard');\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-card rounded-xl border border-border p-6 hover:shadow-lg hover:border-primary/30 transition-all\">\n      <div className=\"mb-4\">\n        <h3 className=\"text-xl mb-2\">{classData.name}</h3>\n        <button\n          onClick={handleCopyCode}\n          className=\"inline-flex items-center gap-1.5 px-3 py-1.5 bg-primary/5 text-primary rounded-lg text-sm hover:bg-primary/10 transition-colors border border-primary/20\"\n        >\n          <span>{classData.code}</span>\n          <Copy className=\"w-3.5 h-3.5\" />\n        </button>\n      </div>\n\n      <div className=\"space-y-3 mb-5\">\n        <div className=\"flex items-start gap-2 text-sm\">\n          <MapPin className=\"w-4 h-4 text-muted-foreground flex-shrink-0 mt-0.5\" />\n          <span className=\"text-muted-foreground\">{classData.location.address}</span>\n        </div>\n        \n        <div className=\"flex items-center gap-2 text-sm\">\n          <Users className=\"w-4 h-4 text-muted-foreground\" />\n          <span className=\"text-muted-foreground\">{classData.studentCount} students</span>\n        </div>\n        \n        <div className=\"flex items-center gap-2 text-sm\">\n          <MapPin className=\"w-4 h-4 text-muted-foreground\" />\n          <span className=\"text-muted-foreground\">{classData.location.radius}m radius</span>\n        </div>\n      </div>\n\n      <button\n        onClick={onViewReport}\n        className=\"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-primary/5 text-primary rounded-lg hover:bg-primary hover:text-white border border-primary/20 transition-all\"\n      >\n        <BarChart3 className=\"w-4 h-4\" />\n        View Report\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAqBO,SAAS,UAAU,EAAE,SAAS,EAAE,YAAY,EAAkB;IACnE,MAAM,iBAAiB;QACrB,UAAU,SAAS,CAAC,SAAS,CAAC,UAAU,IAAI;QAC5C,iJAAK,CAAC,OAAO,CAAC;IAChB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAgB,UAAU,IAAI;;;;;;kCAC5C,8OAAC;wBACC,SAAS;wBACT,WAAU;;0CAEV,8OAAC;0CAAM,UAAU,IAAI;;;;;;0CACrB,8OAAC,0MAAI;gCAAC,WAAU;;;;;;;;;;;;;;;;;;0BAIpB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,oNAAM;gCAAC,WAAU;;;;;;0CAClB,8OAAC;gCAAK,WAAU;0CAAyB,UAAU,QAAQ,CAAC,OAAO;;;;;;;;;;;;kCAGrE,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,6MAAK;gCAAC,WAAU;;;;;;0CACjB,8OAAC;gCAAK,WAAU;;oCAAyB,UAAU,YAAY;oCAAC;;;;;;;;;;;;;kCAGlE,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,oNAAM;gCAAC,WAAU;;;;;;0CAClB,8OAAC;gCAAK,WAAU;;oCAAyB,UAAU,QAAQ,CAAC,MAAM;oCAAC;;;;;;;;;;;;;;;;;;;0BAIvE,8OAAC;gBACC,SAAS;gBACT,WAAU;;kCAEV,8OAAC,+NAAS;wBAAC,WAAU;;;;;;oBAAY;;;;;;;;;;;;;AAKzC"}},
    {"offset": {"line": 2384, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/components/AttendanceReportModal.tsx"],"sourcesContent":["'use client';\n\nimport { X, Download, Users, CheckCircle, Clock, XCircle, Calendar } from 'lucide-react';\nimport { useState } from 'react';\nimport { toast } from 'sonner';\n\ninterface AttendanceReportModalProps {\n  classData: {\n    id: string;\n    name: string;\n    code: string;\n  };\n  onClose: () => void;\n}\n\ninterface AttendanceRecord {\n  id: string;\n  studentName: string;\n  studentEmail: string;\n  date: string;\n  checkInTime: string;\n  checkOutTime?: string;\n  status: 'present' | 'late' | 'absent';\n  duration?: string;\n}\n\nexport function AttendanceReportModal({ classData, onClose }: AttendanceReportModalProps) {\n  const [dateFilter, setDateFilter] = useState('all');\n\n  // Mock attendance data\n  const attendanceRecords: AttendanceRecord[] = [\n    {\n      id: '1',\n      studentName: 'John Doe',\n      studentEmail: 'john@example.com',\n      date: '2024-12-17',\n      checkInTime: '09:00 AM',\n      checkOutTime: '10:30 AM',\n      status: 'present',\n      duration: '1h 30m'\n    },\n    {\n      id: '2',\n      studentName: 'Jane Smith',\n      studentEmail: 'jane@example.com',\n      date: '2024-12-17',\n      checkInTime: '09:05 AM',\n      checkOutTime: '10:35 AM',\n      status: 'late',\n      duration: '1h 30m'\n    },\n    {\n      id: '3',\n      studentName: 'Bob Johnson',\n      studentEmail: 'bob@example.com',\n      date: '2024-12-17',\n      checkInTime: '-',\n      status: 'absent'\n    },\n    {\n      id: '4',\n      studentName: 'Alice Williams',\n      studentEmail: 'alice@example.com',\n      date: '2024-12-17',\n      checkInTime: '08:58 AM',\n      checkOutTime: '10:28 AM',\n      status: 'present',\n      duration: '1h 30m'\n    },\n    {\n      id: '5',\n      studentName: 'John Doe',\n      studentEmail: 'john@example.com',\n      date: '2024-12-16',\n      checkInTime: '09:02 AM',\n      checkOutTime: '10:32 AM',\n      status: 'present',\n      duration: '1h 30m'\n    },\n    {\n      id: '6',\n      studentName: 'Jane Smith',\n      studentEmail: 'jane@example.com',\n      date: '2024-12-16',\n      checkInTime: '09:00 AM',\n      checkOutTime: '10:30 AM',\n      status: 'present',\n      duration: '1h 30m'\n    }\n  ];\n\n  const handleExportCSV = () => {\n    const headers = ['Student Name', 'Email', 'Date', 'Check In', 'Check Out', 'Duration', 'Status'];\n    const rows = attendanceRecords.map(record => [\n      record.studentName,\n      record.studentEmail,\n      record.date,\n      record.checkInTime,\n      record.checkOutTime || '-',\n      record.duration || '-',\n      record.status\n    ]);\n\n    const csvContent = [\n      headers.join(','),\n      ...rows.map(row => row.join(','))\n    ].join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${classData.name}_attendance_${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n    toast.success('Attendance report exported successfully');\n  };\n\n  const presentCount = attendanceRecords.filter(r => r.status === 'present').length;\n  const lateCount = attendanceRecords.filter(r => r.status === 'late').length;\n  const absentCount = attendanceRecords.filter(r => r.status === 'absent').length;\n  const totalRecords = attendanceRecords.length;\n  const attendanceRate = totalRecords > 0 ? Math.round(((presentCount + lateCount) / totalRecords) * 100) : 0;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-6 z-50\">\n      <div className=\"bg-white dark:bg-card rounded-2xl shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"sticky top-0 bg-white dark:bg-card border-b border-border px-6 py-4 flex justify-between items-center rounded-t-2xl\">\n          <div>\n            <h2 className=\"text-2xl\">{classData.name}</h2>\n            <p className=\"text-sm text-muted-foreground\">Attendance Report</p>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={handleExportCSV}\n              className=\"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors\"\n            >\n              <Download className=\"w-4 h-4\" />\n              <span>Export CSV</span>\n            </button>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-secondary rounded-lg transition-colors\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Stats */}\n        <div className=\"px-6 py-5 border-b border-border\">\n          <div className=\"grid grid-cols-4 gap-4\">\n            <div className=\"bg-green-50 p-4 rounded-xl border border-green-200\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <CheckCircle className=\"w-4 h-4 text-green-600\" />\n                <span className=\"text-sm text-green-700\">Present</span>\n              </div>\n              <div className=\"text-2xl\">{presentCount}</div>\n            </div>\n            <div className=\"bg-yellow-50 p-4 rounded-xl border border-yellow-200\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <Clock className=\"w-4 h-4 text-yellow-600\" />\n                <span className=\"text-sm text-yellow-700\">Late</span>\n              </div>\n              <div className=\"text-2xl\">{lateCount}</div>\n            </div>\n            <div className=\"bg-red-50 p-4 rounded-xl border border-red-200\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <XCircle className=\"w-4 h-4 text-red-600\" />\n                <span className=\"text-sm text-red-700\">Absent</span>\n              </div>\n              <div className=\"text-2xl\">{absentCount}</div>\n            </div>\n            <div className=\"bg-primary/5 p-4 rounded-xl border border-primary/20\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <CheckCircle className=\"w-4 h-4 text-primary\" />\n                <span className=\"text-sm text-primary\">Rate</span>\n              </div>\n              <div className=\"text-2xl\">{attendanceRate}%</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"px-6 py-4 border-b border-border\">\n          <div className=\"flex items-center gap-4\">\n            <Calendar className=\"w-5 h-5 text-muted-foreground\" />\n            <select\n              value={dateFilter}\n              onChange={(e) => setDateFilter(e.target.value)}\n              className=\"px-4 py-2 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary\"\n            >\n              <option value=\"all\">All Time</option>\n              <option value=\"today\">Today</option>\n              <option value=\"week\">This Week</option>\n              <option value=\"month\">This Month</option>\n            </select>\n          </div>\n        </div>\n\n        {/* Table */}\n        <div className=\"flex-1 overflow-auto px-6 py-4\">\n          <table className=\"w-full\">\n            <thead className=\"sticky top-0 bg-secondary border-b border-border\">\n              <tr>\n                <th className=\"px-4 py-3 text-left text-sm text-muted-foreground\">Student</th>\n                <th className=\"px-4 py-3 text-left text-sm text-muted-foreground\">Email</th>\n                <th className=\"px-4 py-3 text-left text-sm text-muted-foreground\">Date</th>\n                <th className=\"px-4 py-3 text-left text-sm text-muted-foreground\">Check In</th>\n                <th className=\"px-4 py-3 text-left text-sm text-muted-foreground\">Check Out</th>\n                <th className=\"px-4 py-3 text-left text-sm text-muted-foreground\">Duration</th>\n                <th className=\"px-4 py-3 text-left text-sm text-muted-foreground\">Status</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-border\">\n              {attendanceRecords.map((record) => (\n                <tr key={record.id} className=\"hover:bg-secondary/50 transition-colors\">\n                  <td className=\"px-4 py-4 text-sm\">{record.studentName}</td>\n                  <td className=\"px-4 py-4 text-sm text-muted-foreground\">{record.studentEmail}</td>\n                  <td className=\"px-4 py-4 text-sm text-muted-foreground\">{record.date}</td>\n                  <td className=\"px-4 py-4 text-sm text-muted-foreground\">{record.checkInTime}</td>\n                  <td className=\"px-4 py-4 text-sm text-muted-foreground\">{record.checkOutTime || '-'}</td>\n                  <td className=\"px-4 py-4 text-sm text-muted-foreground\">{record.duration || '-'}</td>\n                  <td className=\"px-4 py-4\">\n                    <span\n                      className={`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs ${\n                        record.status === 'present'\n                          ? 'bg-green-50 text-green-700 border border-green-200'\n                          : record.status === 'late'\n                          ? 'bg-yellow-50 text-yellow-700 border border-yellow-200'\n                          : 'bg-red-50 text-red-700 border border-red-200'\n                      }`}\n                    >\n                      {record.status === 'present' && <CheckCircle className=\"w-3 h-3\" />}\n                      {record.status === 'late' && <Clock className=\"w-3 h-3\" />}\n                      {record.status === 'absent' && <XCircle className=\"w-3 h-3\" />}\n                      {record.status.charAt(0).toUpperCase() + record.status.slice(1)}\n                    </span>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3046, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/hooks/useSupabaseData.ts"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { toast } from 'sonner';\r\n\r\nexport interface Class {\r\n  id: string;\r\n  name: string;\r\n  code: string;\r\n  teacher_id: string;\r\n  location_latitude: number;\r\n  location_longitude: number;\r\n  location_radius: number;\r\n  location_address: string;\r\n  created_at: string;\r\n  student_count?: number;\r\n}\r\n\r\nexport interface EnrolledClass extends Class {\r\n  teacher_name?: string;\r\n}\r\n\r\nexport interface AttendanceRecord {\r\n  id: string;\r\n  class_id: string;\r\n  student_id: string;\r\n  check_in_time: string;\r\n  check_out_time?: string;\r\n  check_in_latitude: number;\r\n  check_in_longitude: number;\r\n  check_out_latitude?: number;\r\n  check_out_longitude?: number;\r\n  status: 'present' | 'late' | 'absent';\r\n  student_name?: string;\r\n  student_email?: string;\r\n  class_name?: string;\r\n}\r\n\r\n// Hook for teacher to manage their classes\r\nexport function useTeacherClasses(teacherId: string) {\r\n  const [classes, setClasses] = useState<Class[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchClasses = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('classes')\r\n        .select(`\r\n          *,\r\n          class_enrollments(count)\r\n        `)\r\n        .eq('teacher_id', teacherId)\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n\r\n      const classesWithCount = data?.map(cls => ({\r\n        ...cls,\r\n        student_count: cls.class_enrollments?.[0]?.count || 0\r\n      })) || [];\r\n\r\n      setClasses(classesWithCount);\r\n    } catch (error: any) {\r\n      console.error('Error fetching classes:', error);\r\n      toast.error('Failed to load classes');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchClasses();\r\n  }, [teacherId]);\r\n\r\n  const createClass = async (classData: {\r\n    name: string;\r\n    code: string;\r\n    location_latitude: number;\r\n    location_longitude: number;\r\n    location_radius: number;\r\n    location_address: string;\r\n  }) => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('classes')\r\n        .insert([{\r\n          ...classData,\r\n          teacher_id: teacherId,\r\n        }])\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      setClasses([data, ...classes]);\r\n      toast.success('Class created successfully!');\r\n      return data;\r\n    } catch (error: any) {\r\n      console.error('Error creating class:', error);\r\n      toast.error(error.message || 'Failed to create class');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  return { classes, loading, createClass, refetch: fetchClasses };\r\n}\r\n\r\n// Hook for students to manage their enrollments\r\nexport function useStudentClasses(studentId: string) {\r\n  const [enrolledClasses, setEnrolledClasses] = useState<EnrolledClass[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchEnrolledClasses = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('class_enrollments')\r\n        .select(`\r\n          *,\r\n          classes (\r\n            *,\r\n            profiles!classes_teacher_id_fkey (name)\r\n          )\r\n        `)\r\n        .eq('student_id', studentId);\r\n\r\n      if (error) throw error;\r\n\r\n      const classes = data?.map(enrollment => ({\r\n        ...enrollment.classes,\r\n        teacher_name: enrollment.classes.profiles?.name || 'Unknown',\r\n      })) || [];\r\n\r\n      setEnrolledClasses(classes);\r\n    } catch (error: any) {\r\n      console.error('Error fetching enrolled classes:', error);\r\n      toast.error('Failed to load classes');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchEnrolledClasses();\r\n  }, [studentId]);\r\n\r\n  const joinClass = async (code: string) => {\r\n    try {\r\n      // Find class by code\r\n      const { data: classData, error: classError } = await supabase\r\n        .from('classes')\r\n        .select('*')\r\n        .eq('code', code)\r\n        .single();\r\n\r\n      if (classError) throw new Error('Class not found');\r\n\r\n      // Enroll student\r\n      const { error: enrollError } = await supabase\r\n        .from('class_enrollments')\r\n        .insert([{\r\n          class_id: classData.id,\r\n          student_id: studentId,\r\n        }]);\r\n\r\n      if (enrollError) {\r\n        if (enrollError.code === '23505') {\r\n          throw new Error('You are already enrolled in this class');\r\n        }\r\n        throw enrollError;\r\n      }\r\n\r\n      await fetchEnrolledClasses();\r\n      toast.success('Successfully joined class!');\r\n      return classData;\r\n    } catch (error: any) {\r\n      console.error('Error joining class:', error);\r\n      toast.error(error.message || 'Failed to join class');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  return { enrolledClasses, loading, joinClass, refetch: fetchEnrolledClasses };\r\n}\r\n\r\n// Hook for attendance records\r\nexport function useAttendance(classId?: string, studentId?: string) {\r\n  const [records, setRecords] = useState<AttendanceRecord[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchAttendance = async () => {\r\n    try {\r\n      let query = supabase\r\n        .from('attendance_records')\r\n        .select(`\r\n          *,\r\n          profiles!attendance_records_student_id_fkey (name, email),\r\n          classes!attendance_records_class_id_fkey (name)\r\n        `)\r\n        .order('check_in_time', { ascending: false });\r\n\r\n      if (classId) {\r\n        query = query.eq('class_id', classId);\r\n      }\r\n      if (studentId) {\r\n        query = query.eq('student_id', studentId);\r\n      }\r\n\r\n      const { data, error } = await query;\r\n\r\n      if (error) throw error;\r\n\r\n      const recordsWithDetails = data?.map(record => ({\r\n        ...record,\r\n        student_name: record.profiles?.name,\r\n        student_email: record.profiles?.email,\r\n        class_name: record.classes?.name,\r\n      })) || [];\r\n\r\n      setRecords(recordsWithDetails);\r\n    } catch (error: any) {\r\n      console.error('Error fetching attendance:', error);\r\n      toast.error('Failed to load attendance records');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAttendance();\r\n  }, [classId, studentId]);\r\n\r\n  const checkIn = async (\r\n    classId: string,\r\n    studentId: string,\r\n    latitude: number,\r\n    longitude: number\r\n  ) => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('attendance_records')\r\n        .insert([{\r\n          class_id: classId,\r\n          student_id: studentId,\r\n          check_in_time: new Date().toISOString(),\r\n          check_in_latitude: latitude,\r\n          check_in_longitude: longitude,\r\n          status: 'present', // You can add logic to determine if late\r\n        }])\r\n        .select()\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      await fetchAttendance();\r\n      toast.success('Checked in successfully!');\r\n      return data;\r\n    } catch (error: any) {\r\n      console.error('Error checking in:', error);\r\n      toast.error(error.message || 'Failed to check in');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const checkOut = async (recordId: string, latitude: number, longitude: number) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('attendance_records')\r\n        .update({\r\n          check_out_time: new Date().toISOString(),\r\n          check_out_latitude: latitude,\r\n          check_out_longitude: longitude,\r\n        })\r\n        .eq('id', recordId);\r\n\r\n      if (error) throw error;\r\n\r\n      await fetchAttendance();\r\n      toast.success('Checked out successfully!');\r\n    } catch (error: any) {\r\n      console.error('Error checking out:', error);\r\n      toast.error(error.message || 'Failed to check out');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  return { records, loading, checkIn, checkOut, refetch: fetchAttendance };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3272, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/components/TeacherDashboard.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { User } from '@/app/page';\nimport { Plus, MapPin, LogOut, Users, BookOpen, BarChart3, Calendar, Moon, Sun } from 'lucide-react';\nimport { CreateClassModal } from './CreateClassModal';\nimport { ClassCard } from './ClassCard';\nimport { AttendanceReportModal } from './AttendanceReportModal';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useTeacherClasses } from '@/hooks/useSupabaseData';\n\ninterface TeacherDashboardProps {\n  user: User;\n  onLogout: () => void;\n  isDarkMode: boolean;\n  toggleDarkMode: () => void;\n}\n\ninterface Class {\n  id: string;\n  name: string;\n  code: string;\n  teacherId: string;\n  location: {\n    latitude: number;\n    longitude: number;\n    radius: number;\n    address: string;\n  };\n  createdAt: string;\n  studentCount: number;\n}\n\nexport function TeacherDashboard({ user, onLogout, isDarkMode, toggleDarkMode }: TeacherDashboardProps) {\n  const { signOut } = useAuth();\n  const { classes, loading, createClass } = useTeacherClasses(user.id);\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [selectedClass, setSelectedClass] = useState<Class | null>(null);\n\n  const handleCreateClass = async (classData: {\n    name: string;\n    code: string;\n    location: {\n      latitude: number;\n      longitude: number;\n      radius: number;\n      address: string;\n    };\n  }) => {\n    try {\n      await createClass({\n        name: classData.name,\n        code: classData.code,\n        location_latitude: classData.location.latitude,\n        location_longitude: classData.location.longitude,\n        location_radius: classData.location.radius,\n        location_address: classData.location.address,\n      });\n      setShowCreateModal(false);\n    } catch (error) {\n      // Error already handled in hook\n    }\n  };\n\n  // Transform classes to match the ClassCard expected format\n  const transformedClasses = classes.map(cls => ({\n    id: cls.id,\n    name: cls.name,\n    code: cls.code,\n    teacherId: cls.teacher_id,\n    location: {\n      latitude: cls.location_latitude,\n      longitude: cls.location_longitude,\n      radius: cls.location_radius,\n      address: cls.location_address,\n    },\n    createdAt: cls.created_at,\n    studentCount: cls.student_count || 0,\n  }));\n\n  const totalStudents = transformedClasses.reduce((sum, c) => sum + c.studentCount, 0);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Navigation */}\n      <nav className=\"border-b border-border bg-white dark:bg-card\">\n        <div className=\"container mx-auto px-6 py-4 flex justify-between items-center\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\n              <MapPin className=\"w-5 h-5 text-white\" />\n            </div>\n            <span className=\"text-xl\">AttendEase</span>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            <button\n              onClick={toggleDarkMode}\n              className=\"p-2 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors\"\n              title={isDarkMode ? 'Light mode' : 'Dark mode'}\n            >\n              {isDarkMode ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n            </button>\n            <div className=\"text-right\">\n              <div className=\"text-sm\">{user.name}</div>\n              <div className=\"text-xs text-muted-foreground\">Teacher</div>\n            </div>\n            <button\n              onClick={signOut}\n              className=\"p-2 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors\"\n              title=\"Logout\"\n            >\n              <LogOut className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      <div className=\"container mx-auto px-6 py-12 max-w-6xl\">\n        {/* Welcome Section */}\n        <div className=\"mb-12\">\n          <h1 className=\"text-4xl mb-3\">Welcome back, {user.name.split(' ')[0]}</h1>\n          <p className=\"text-xl text-muted-foreground\">\n            You have {transformedClasses.length} {transformedClasses.length === 1 ? 'class' : 'classes'} with {totalStudents} total students\n          </p>\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"grid md:grid-cols-3 gap-6 mb-16\">\n          <button\n            onClick={() => setShowCreateModal(true)}\n            className=\"bg-white dark:bg-card p-8 rounded-2xl border-2 border-border hover:border-primary hover:shadow-lg transition-all text-left group\"\n          >\n            <div className=\"w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors\">\n              <Plus className=\"w-7 h-7 text-primary\" />\n            </div>\n            <h3 className=\"text-xl mb-2\">Create Class</h3>\n            <p className=\"text-muted-foreground\">\n              Set up a new class with location boundaries\n            </p>\n          </button>\n\n          <div className=\"bg-white dark:bg-card p-8 rounded-2xl border-2 border-border\">\n            <div className=\"w-14 h-14 bg-green-50 dark:bg-green-500/10 rounded-xl flex items-center justify-center mb-4\">\n              <Users className=\"w-7 h-7 text-green-600 dark:text-green-400\" />\n            </div>\n            <h3 className=\"text-xl mb-2\">Total Students</h3>\n            <p className=\"text-3xl text-primary\">{totalStudents}</p>\n          </div>\n\n          <div className=\"bg-white dark:bg-card p-8 rounded-2xl border-2 border-border\">\n            <div className=\"w-14 h-14 bg-purple-50 dark:bg-purple-500/10 rounded-xl flex items-center justify-center mb-4\">\n              <Calendar className=\"w-7 h-7 text-purple-600 dark:text-purple-400\" />\n            </div>\n            <h3 className=\"text-xl mb-2\">Active Today</h3>\n            <p className=\"text-3xl text-primary\">{Math.floor(totalStudents * 0.85)}</p>\n          </div>\n        </div>\n\n        {/* Classes Section */}\n        <div>\n          <h2 className=\"text-3xl mb-8\">Your Classes</h2>\n\n          {transformedClasses.length === 0 ? (\n            <div className=\"bg-white dark:bg-card rounded-2xl border-2 border-dashed border-border p-20 text-center\">\n              <div className=\"w-20 h-20 bg-secondary rounded-2xl flex items-center justify-center mx-auto mb-6\">\n                <BookOpen className=\"w-10 h-10 text-muted-foreground\" />\n              </div>\n              <h3 className=\"text-2xl mb-3\">No classes yet</h3>\n              <p className=\"text-lg text-muted-foreground mb-8 max-w-md mx-auto\">\n                Create your first class to start tracking attendance\n              </p>\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"px-8 py-3.5 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors\"\n              >\n                Create Your First Class\n              </button>\n            </div>\n          ) : (\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              {transformedClasses.map((classItem) => (\n                <ClassCard\n                  key={classItem.id}\n                  classData={classItem}\n                  onViewReport={() => setSelectedClass(classItem)}\n                />\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Modals */}\n      {showCreateModal && (\n        <CreateClassModal\n          onClose={() => setShowCreateModal(false)}\n          onCreate={handleCreateClass}\n        />\n      )}\n\n      {selectedClass && (\n        <AttendanceReportModal\n          classData={selectedClass}\n          onClose={() => setSelectedClass(null)}\n        />\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3751, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/components/JoinClassModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { X } from 'lucide-react';\n\ninterface JoinClassModalProps {\n  onClose: () => void;\n  onJoin: (code: string) => void;\n}\n\nexport function JoinClassModal({ onClose, onJoin }: JoinClassModalProps) {\n  const [code, setCode] = useState('');\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (code.trim()) {\n      onJoin(code.toUpperCase());\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-6 z-50\">\n      <div className=\"bg-white dark:bg-card rounded-2xl shadow-xl w-full max-w-md\">\n        <div className=\"border-b border-border px-6 py-4 flex justify-between items-center\">\n          <h2 className=\"text-2xl\">Join Class</h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-secondary rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6\">\n          <div className=\"mb-6\">\n            <label htmlFor=\"classCode\" className=\"block text-sm mb-2\">\n              Class Code\n            </label>\n            <input\n              id=\"classCode\"\n              type=\"text\"\n              value={code}\n              onChange={(e) => setCode(e.target.value.toUpperCase())}\n              placeholder=\"e.g., CS101A\"\n              required\n              className=\"w-full px-4 py-3 bg-background border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary text-center text-xl tracking-wider\"\n              maxLength={10}\n            />\n            <p className=\"text-sm text-muted-foreground mt-2\">\n              Enter the class code provided by your teacher\n            </p>\n          </div>\n\n          <div className=\"flex gap-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 px-6 py-3 bg-secondary text-foreground rounded-lg hover:bg-secondary/80 transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors\"\n            >\n              Join Class\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUO,SAAS,eAAe,EAAE,OAAO,EAAE,MAAM,EAAuB;IACrE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IAEjC,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,KAAK,IAAI,IAAI;YACf,OAAO,KAAK,WAAW;QACzB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAW;;;;;;sCACzB,8OAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,8OAAC,iMAAC;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAIjB,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACtC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,SAAQ;oCAAY,WAAU;8CAAqB;;;;;;8CAG1D,8OAAC;oCACC,IAAG;oCACH,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,WAAW;oCACnD,aAAY;oCACZ,QAAQ;oCACR,WAAU;oCACV,WAAW;;;;;;8CAEb,8OAAC;oCAAE,WAAU;8CAAqC;;;;;;;;;;;;sCAKpD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}},
    {"offset": {"line": 3901, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/components/StudentDashboard.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { User } from '@/app/page';\nimport { MapPin, LogOut, Clock, CheckCircle, XCircle, Plus, Award, BookOpen, Moon, Sun } from 'lucide-react';\nimport { JoinClassModal } from './JoinClassModal';\nimport { toast } from 'sonner';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useStudentClasses, useAttendance } from '@/hooks/useSupabaseData';\n\ninterface StudentDashboardProps {\n  user: User;\n  onLogout: () => void;\n  isDarkMode: boolean;\n  toggleDarkMode: () => void;\n}\n\ninterface EnrolledClass {\n  id: string;\n  name: string;\n  code: string;\n  teacherName: string;\n  location: {\n    latitude: number;\n    longitude: number;\n    radius: number;\n    address: string;\n  };\n  isCheckedIn: boolean;\n  checkInTime?: string;\n}\n\ninterface AttendanceHistory {\n  id: string;\n  className: string;\n  date: string;\n  checkInTime: string;\n  checkOutTime?: string;\n  status: 'present' | 'late' | 'absent';\n}\n\nexport function StudentDashboard({ user, onLogout, isDarkMode, toggleDarkMode }: StudentDashboardProps) {\n  const { signOut, user: authUser } = useAuth();\n  const [showJoinModal, setShowJoinModal] = useState(false);\n  const [currentLocation, setCurrentLocation] = useState<{ latitude: number; longitude: number } | null>(null);\n  const [locationError, setLocationError] = useState<string | null>(null);\n  const [checkedInClasses, setCheckedInClasses] = useState<Set<string>>(new Set());\n  \n  // Fetch real data from Supabase\n  const { enrolledClasses: supabaseClasses, loading: classesLoading, joinClass, refetch: refetchClasses } = useStudentClasses(authUser?.id || '');\n  const { records: attendanceRecords, loading: attendanceLoading, checkIn, checkOut } = useAttendance(undefined, authUser?.id);\n\n  // Transform Supabase classes to match component interface\n  const enrolledClasses: EnrolledClass[] = supabaseClasses.map(cls => ({\n    id: cls.id,\n    name: cls.name,\n    code: cls.code,\n    teacherName: cls.teacher_name || 'Unknown',\n    location: {\n      latitude: cls.location_latitude,\n      longitude: cls.location_longitude,\n      radius: cls.location_radius,\n      address: cls.location_address\n    },\n    isCheckedIn: checkedInClasses.has(cls.id)\n  }));\n\n  // Transform attendance records to match component interface\n  const attendanceHistory: AttendanceHistory[] = attendanceRecords.map(record => ({\n    id: record.id,\n    className: record.class_name || 'Unknown Class',\n    date: new Date(record.check_in_time).toLocaleDateString(),\n    checkInTime: new Date(record.check_in_time).toLocaleTimeString(),\n    checkOutTime: record.check_out_time ? new Date(record.check_out_time).toLocaleTimeString() : undefined,\n    status: record.status\n  }));\n\n  useEffect(() => {\n    // Get current location\n    if (!navigator.geolocation) {\n      setLocationError('Geolocation is not supported by your browser');\n      toast.error('Geolocation is not supported by your browser');\n      return;\n    }\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        setCurrentLocation({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude\n        });\n        setLocationError(null);\n        toast.success('Location services enabled');\n      },\n      (error) => {\n        let errorMessage = 'Unable to get your location';\n        \n        switch (error.code) {\n          case error.PERMISSION_DENIED:\n            errorMessage = 'Location permission denied. Please enable location services.';\n            break;\n          case error.POSITION_UNAVAILABLE:\n            errorMessage = 'Location information is unavailable.';\n            break;\n          case error.TIMEOUT:\n            errorMessage = 'Location request timed out.';\n            break;\n          default:\n            errorMessage = 'An unknown error occurred while getting location.';\n        }\n        \n        console.error('Geolocation error:', error);\n        setLocationError(errorMessage);\n        toast.error(errorMessage);\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 0\n      }\n    );\n  }, []);\n\n  const calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number) => {\n    const R = 6371e3; // Earth's radius in meters\n    const φ1 = (lat1 * Math.PI) / 180;\n    const φ2 = (lat2 * Math.PI) / 180;\n    const Δφ = ((lat2 - lat1) * Math.PI) / 180;\n    const Δλ = ((lon2 - lon1) * Math.PI) / 180;\n\n    const a =\n      Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +\n      Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n    return R * c;\n  };\n\n  const isWithinRange = (classLocation: { latitude: number; longitude: number; radius: number }) => {\n    if (!currentLocation) return false;\n    const distance = calculateDistance(\n      currentLocation.latitude,\n      currentLocation.longitude,\n      classLocation.latitude,\n      classLocation.longitude\n    );\n    return distance <= classLocation.radius;\n  };\n\n  const handleCheckIn = async (classId: string) => {\n    const classItem = enrolledClasses.find(c => c.id === classId);\n    if (!classItem) return;\n\n    if (!currentLocation) {\n      toast.error('Unable to get your location. Please enable location services.');\n      return;\n    }\n\n    if (!isWithinRange(classItem.location)) {\n      toast.error('You are not within the allowed location to check in.');\n      return;\n    }\n\n    try {\n      await checkIn(\n        classId,\n        authUser?.id || '',\n        currentLocation.latitude,\n        currentLocation.longitude\n      );\n      setCheckedInClasses(prev => new Set(prev).add(classId));\n      toast.success('Checked in successfully!');\n    } catch (error) {\n      console.error('Check-in error:', error);\n    }\n  };\n\n  const handleCheckOut = async (classId: string) => {\n    const classItem = enrolledClasses.find(c => c.id === classId);\n    if (!classItem || !classItem.isCheckedIn) return;\n\n    if (!currentLocation) {\n      toast.error('Unable to get your location. Please enable location services.');\n      return;\n    }\n\n    try {\n      // Find the active attendance record for this class\n      const activeRecord = attendanceRecords.find(\n        r => r.class_id === classId && !r.check_out_time\n      );\n\n      if (activeRecord) {\n        await checkOut(\n          activeRecord.id,\n          currentLocation.latitude,\n          currentLocation.longitude\n        );\n        setCheckedInClasses(prev => {\n          const newSet = new Set(prev);\n          newSet.delete(classId);\n          return newSet;\n        });\n        toast.success('Checked out successfully!');\n      }\n    } catch (error) {\n      console.error('Check-out error:', error);\n    }\n  };\n\n  const handleJoinClass = async (code: string) => {\n    try {\n      await joinClass(code);\n      setShowJoinModal(false);\n    } catch (error: any) {\n      // Error is already handled by the hook with toast\n      // Just close the modal if it's a duplicate enrollment\n      if (error.message === 'You are already enrolled in this class') {\n        setShowJoinModal(false);\n      }\n    }\n  };\n\n  const presentCount = attendanceHistory.filter(h => h.status === 'present').length;\n  const attendanceRate = attendanceHistory.length > 0\n    ? Math.round((presentCount / attendanceHistory.length) * 100)\n    : 0;\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Navigation */}\n      <nav className=\"border-b border-border bg-white dark:bg-card\">\n        <div className=\"container mx-auto px-6 py-4 flex justify-between items-center\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 bg-primary rounded-lg flex items-center justify-center\">\n              <MapPin className=\"w-5 h-5 text-white\" />\n            </div>\n            <span className=\"text-xl\">AttendEase</span>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            <button\n              onClick={toggleDarkMode}\n              className=\"p-2 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors\"\n              title={isDarkMode ? 'Light mode' : 'Dark mode'}\n            >\n              {isDarkMode ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n            </button>\n            <div className=\"text-right\">\n              <div className=\"text-sm\">{user.name}</div>\n              <div className=\"text-xs text-muted-foreground\">Student</div>\n            </div>\n            <button\n              onClick={signOut}\n              className=\"p-2 text-muted-foreground hover:text-foreground hover:bg-secondary rounded-lg transition-colors\"\n              title=\"Logout\"\n            >\n              <LogOut className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      <div className=\"container mx-auto px-6 py-12 max-w-6xl\">\n        {/* Welcome Section */}\n        <div className=\"mb-12\">\n          <h1 className=\"text-4xl mb-3\">Hello, {user.name.split(' ')[0]}</h1>\n          <p className=\"text-xl text-muted-foreground\">\n            {enrolledClasses.length > 0 \n              ? `You're enrolled in ${enrolledClasses.length} ${enrolledClasses.length === 1 ? 'class' : 'classes'} with ${attendanceRate}% attendance rate`\n              : 'Join your first class to get started'\n            }\n          </p>\n        </div>\n\n        {/* Quick Stats */}\n        <div className=\"grid md:grid-cols-3 gap-6 mb-16\">\n          <button\n            onClick={() => setShowJoinModal(true)}\n            className=\"bg-white dark:bg-card p-8 rounded-2xl border-2 border-border hover:border-primary hover:shadow-lg transition-all text-left group\"\n          >\n            <div className=\"w-14 h-14 bg-primary/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-primary/20 transition-colors\">\n              <Plus className=\"w-7 h-7 text-primary\" />\n            </div>\n            <h3 className=\"text-xl mb-2\">Join Class</h3>\n            <p className=\"text-muted-foreground\">\n              Enter a class code from your teacher\n            </p>\n          </button>\n\n          <div className=\"bg-white dark:bg-card p-8 rounded-2xl border-2 border-border\">\n            <div className=\"w-14 h-14 bg-green-50 dark:bg-green-500/10 rounded-xl flex items-center justify-center mb-4\">\n              <Award className=\"w-7 h-7 text-green-600 dark:text-green-400\" />\n            </div>\n            <h3 className=\"text-xl mb-2\">Attendance Rate</h3>\n            <p className=\"text-3xl text-primary\">{attendanceRate}%</p>\n          </div>\n\n          <div className=\"bg-white dark:bg-card p-8 rounded-2xl border-2 border-border\">\n            <div className=\"w-14 h-14 bg-purple-50 dark:bg-purple-500/10 rounded-xl flex items-center justify-center mb-4\">\n              <CheckCircle className=\"w-7 h-7 text-purple-600 dark:text-purple-400\" />\n            </div>\n            <h3 className=\"text-xl mb-2\">Days Present</h3>\n            <p className=\"text-3xl text-primary\">{presentCount}</p>\n          </div>\n        </div>\n\n        {/* My Classes */}\n        <div className=\"mb-16\">\n          <h2 className=\"text-3xl mb-8\">My Classes</h2>\n\n          {enrolledClasses.length === 0 ? (\n            <div className=\"bg-white dark:bg-card rounded-2xl border-2 border-dashed border-border p-20 text-center\">\n              <div className=\"w-20 h-20 bg-secondary rounded-2xl flex items-center justify-center mx-auto mb-6\">\n                <BookOpen className=\"w-10 h-10 text-muted-foreground\" />\n              </div>\n              <h3 className=\"text-2xl mb-3\">No classes yet</h3>\n              <p className=\"text-lg text-muted-foreground mb-8 max-w-md mx-auto\">\n                Join your first class using an invite code from your teacher\n              </p>\n              <button\n                onClick={() => setShowJoinModal(true)}\n                className=\"px-8 py-3.5 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors\"\n              >\n                Join Your First Class\n              </button>\n            </div>\n          ) : (\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              {enrolledClasses.map((classItem) => {\n                const inRange = isWithinRange(classItem.location);\n                return (\n                  <div\n                    key={classItem.id}\n                    className=\"bg-white dark:bg-card rounded-2xl border-2 border-border p-6 hover:shadow-lg transition-all\"\n                  >\n                    <div className=\"mb-4\">\n                      <h3 className=\"text-xl mb-1\">{classItem.name}</h3>\n                      <p className=\"text-sm text-muted-foreground\">{classItem.teacherName}</p>\n                    </div>\n\n                    <div className=\"space-y-2 mb-6\">\n                      <div className=\"flex items-start gap-2 text-sm\">\n                        <MapPin className=\"w-4 h-4 mt-0.5 flex-shrink-0 text-muted-foreground\" />\n                        <span className=\"text-muted-foreground\">{classItem.location.address}</span>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <div\n                          className={`w-2 h-2 rounded-full ${\n                            inRange ? 'bg-green-500' : 'bg-red-500'\n                          }`}\n                        />\n                        <span className=\"text-sm text-muted-foreground\">\n                          {inRange ? 'Within range' : 'Out of range'}\n                        </span>\n                      </div>\n                    </div>\n\n                    {classItem.isCheckedIn ? (\n                      <div className=\"space-y-3\">\n                        <div className=\"flex items-center gap-2 text-sm text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-500/10 px-4 py-3 rounded-lg border border-green-200 dark:border-green-500/20\">\n                          <CheckCircle className=\"w-4 h-4\" />\n                          <span>Checked in at {new Date(classItem.checkInTime!).toLocaleTimeString()}</span>\n                        </div>\n                        <button\n                          onClick={() => handleCheckOut(classItem.id)}\n                          className=\"w-full px-4 py-3 bg-secondary text-foreground rounded-lg hover:bg-secondary/80 border-2 border-border transition-all\"\n                        >\n                          Check Out\n                        </button>\n                      </div>\n                    ) : (\n                      <button\n                        onClick={() => handleCheckIn(classItem.id)}\n                        disabled={!inRange}\n                        className={`w-full px-4 py-3 rounded-lg transition-all ${\n                          inRange\n                            ? 'bg-primary text-white hover:bg-primary/90'\n                            : 'bg-secondary text-muted-foreground cursor-not-allowed border-2 border-border'\n                        }`}\n                      >\n                        Check In\n                      </button>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n\n        {/* Recent Attendance */}\n        {attendanceHistory.length > 0 && (\n          <div>\n            <h2 className=\"text-3xl mb-8\">Recent Attendance</h2>\n            <div className=\"bg-white dark:bg-card rounded-2xl border-2 border-border overflow-hidden\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-secondary\">\n                    <tr>\n                      <th className=\"px-6 py-4 text-left text-sm text-muted-foreground\">Class</th>\n                      <th className=\"px-6 py-4 text-left text-sm text-muted-foreground\">Date</th>\n                      <th className=\"px-6 py-4 text-left text-sm text-muted-foreground\">Check In</th>\n                      <th className=\"px-6 py-4 text-left text-sm text-muted-foreground\">Check Out</th>\n                      <th className=\"px-6 py-4 text-left text-sm text-muted-foreground\">Status</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-border\">\n                    {attendanceHistory.slice(0, 5).map((record) => (\n                      <tr key={record.id} className=\"hover:bg-secondary/30 transition-colors\">\n                        <td className=\"px-6 py-4\">{record.className}</td>\n                        <td className=\"px-6 py-4 text-muted-foreground\">{record.date}</td>\n                        <td className=\"px-6 py-4 text-muted-foreground\">{record.checkInTime}</td>\n                        <td className=\"px-6 py-4 text-muted-foreground\">\n                          {record.checkOutTime || '-'}\n                        </td>\n                        <td className=\"px-6 py-4\">\n                          <span\n                            className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs ${\n                              record.status === 'present'\n                                ? 'bg-green-50 dark:bg-green-500/10 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-500/20'\n                                : record.status === 'late'\n                                ? 'bg-yellow-50 dark:bg-yellow-500/10 text-yellow-700 dark:text-yellow-300 border border-yellow-200 dark:border-yellow-500/20'\n                                : 'bg-red-50 dark:bg-red-500/10 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-500/20'\n                            }`}\n                          >\n                            {record.status === 'present' && <CheckCircle className=\"w-3 h-3\" />}\n                            {record.status === 'late' && <Clock className=\"w-3 h-3\" />}\n                            {record.status === 'absent' && <XCircle className=\"w-3 h-3\" />}\n                            {record.status.charAt(0).toUpperCase() + record.status.slice(1)}\n                          </span>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Join Class Modal */}\n      {showJoinModal && (\n        <JoinClassModal\n          onClose={() => setShowJoinModal(false)}\n          onJoin={handleJoinClass}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4776, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/limva/Downloads/Attendance%20System%20Website%20Design/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { LandingPage } from '@/components/LandingPage';\nimport { LoginPage } from '@/components/LoginPage';\nimport { SignupPage } from '@/components/SignupPage';\nimport { TeacherDashboard } from '@/components/TeacherDashboard';\nimport { StudentDashboard } from '@/components/StudentDashboard';\nimport { Toaster } from 'sonner';\nimport { AuthProvider, useAuth } from '@/contexts/AuthContext';\n\nexport interface User {\n  id: string;\n  name: string;\n  email: string;\n  role: 'teacher' | 'student';\n}\n\nexport interface Class {\n  id: string;\n  name: string;\n  code: string;\n  teacherId: string;\n  location: {\n    latitude: number;\n    longitude: number;\n    radius: number;\n    address: string;\n  };\n  createdAt: string;\n}\n\nexport interface AttendanceRecord {\n  id: string;\n  studentId: string;\n  studentName: string;\n  classId: string;\n  checkInTime: string;\n  checkOutTime?: string;\n  checkInLocation: {\n    latitude: number;\n    longitude: number;\n  };\n  checkOutLocation?: {\n    latitude: number;\n    longitude: number;\n  };\n}\n\nfunction HomeContent() {\n  const { profile, loading, signOut } = useAuth();\n  const [currentPage, setCurrentPage] = useState<'landing' | 'login' | 'signup' | 'dashboard'>('landing');\n  const [isDarkMode, setIsDarkMode] = useState(false);\n\n  useEffect(() => {\n    // Check for saved dark mode preference\n    const savedTheme = localStorage.getItem('theme');\n    if (savedTheme === 'dark') {\n      setIsDarkMode(true);\n      document.documentElement.classList.add('dark');\n    }\n  }, []);\n\n  useEffect(() => {\n    // Auto-navigate to dashboard if user is logged in\n    if (profile) {\n      console.log('User profile loaded:', profile);\n      setCurrentPage('dashboard');\n    } else if (!loading) {\n      console.log('No profile, showing landing page');\n      setCurrentPage('landing');\n    }\n  }, [profile, loading]);\n\n  const toggleDarkMode = () => {\n    setIsDarkMode(!isDarkMode);\n    if (!isDarkMode) {\n      document.documentElement.classList.add('dark');\n      localStorage.setItem('theme', 'dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n      localStorage.setItem('theme', 'light');\n    }\n  };\n\n  const handleLogout = async () => {\n    await signOut();\n    setCurrentPage('landing');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n      </div>\n    );\n  }\n\n  // If user is authenticated, show appropriate dashboard\n  if (profile) {\n    const user: User = {\n      id: profile.id,\n      name: profile.name,\n      email: profile.email,\n      role: profile.role,\n    };\n\n    if (profile.role === 'teacher') {\n      return (\n        <TeacherDashboard \n          user={user} \n          onLogout={handleLogout}\n          isDarkMode={isDarkMode}\n          toggleDarkMode={toggleDarkMode}\n        />\n      );\n    }\n\n    if (profile.role === 'student') {\n      return (\n        <StudentDashboard \n          user={user} \n          onLogout={handleLogout}\n          isDarkMode={isDarkMode}\n          toggleDarkMode={toggleDarkMode}\n        />\n      );\n    }\n  }\n\n  return (\n    <>\n      {currentPage === 'landing' && (\n        <LandingPage\n          onLogin={() => setCurrentPage('login')}\n          onSignup={() => setCurrentPage('signup')}\n          isDarkMode={isDarkMode}\n          toggleDarkMode={toggleDarkMode}\n        />\n      )}\n\n      {currentPage === 'login' && (\n        <LoginPage\n          onBack={() => setCurrentPage('landing')}\n          onSignup={() => setCurrentPage('signup')}\n          isDarkMode={isDarkMode}\n          toggleDarkMode={toggleDarkMode}\n        />\n      )}\n\n      {currentPage === 'signup' && (\n        <SignupPage\n          onBack={() => setCurrentPage('landing')}\n          onLogin={() => setCurrentPage('login')}\n          isDarkMode={isDarkMode}\n          toggleDarkMode={toggleDarkMode}\n        />\n      )}\n    </>\n  );\n}\n\nexport default function Home() {\n  return (\n    <AuthProvider>\n      <Toaster position=\"top-right\" />\n      <HomeContent />\n    </AuthProvider>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AAiDA,SAAS;IACP,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,0IAAO;IAC7C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAA+C;IAC7F,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,IAAA,kNAAS,EAAC;QACR,uCAAuC;QACvC,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,eAAe,QAAQ;YACzB,cAAc;YACd,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;QACzC;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,kDAAkD;QAClD,IAAI,SAAS;YACX,QAAQ,GAAG,CAAC,wBAAwB;YACpC,eAAe;QACjB,OAAO,IAAI,CAAC,SAAS;YACnB,QAAQ,GAAG,CAAC;YACZ,eAAe;QACjB;IACF,GAAG;QAAC;QAAS;KAAQ;IAErB,MAAM,iBAAiB;QACrB,cAAc,CAAC;QACf,IAAI,CAAC,YAAY;YACf,SAAS,eAAe,CAAC,SAAS,CAAC,GAAG,CAAC;YACvC,aAAa,OAAO,CAAC,SAAS;QAChC,OAAO;YACL,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC;YAC1C,aAAa,OAAO,CAAC,SAAS;QAChC;IACF;IAEA,MAAM,eAAe;QACnB,MAAM;QACN,eAAe;IACjB;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAGrB;IAEA,uDAAuD;IACvD,IAAI,SAAS;QACX,MAAM,OAAa;YACjB,IAAI,QAAQ,EAAE;YACd,MAAM,QAAQ,IAAI;YAClB,OAAO,QAAQ,KAAK;YACpB,MAAM,QAAQ,IAAI;QACpB;QAEA,IAAI,QAAQ,IAAI,KAAK,WAAW;YAC9B,qBACE,8OAAC,0JAAgB;gBACf,MAAM;gBACN,UAAU;gBACV,YAAY;gBACZ,gBAAgB;;;;;;QAGtB;QAEA,IAAI,QAAQ,IAAI,KAAK,WAAW;YAC9B,qBACE,8OAAC,0JAAgB;gBACf,MAAM;gBACN,UAAU;gBACV,YAAY;gBACZ,gBAAgB;;;;;;QAGtB;IACF;IAEA,qBACE;;YACG,gBAAgB,2BACf,8OAAC,gJAAW;gBACV,SAAS,IAAM,eAAe;gBAC9B,UAAU,IAAM,eAAe;gBAC/B,YAAY;gBACZ,gBAAgB;;;;;;YAInB,gBAAgB,yBACf,8OAAC,4IAAS;gBACR,QAAQ,IAAM,eAAe;gBAC7B,UAAU,IAAM,eAAe;gBAC/B,YAAY;gBACZ,gBAAgB;;;;;;YAInB,gBAAgB,0BACf,8OAAC,8IAAU;gBACT,QAAQ,IAAM,eAAe;gBAC7B,SAAS,IAAM,eAAe;gBAC9B,YAAY;gBACZ,gBAAgB;;;;;;;;AAK1B;AAEe,SAAS;IACtB,qBACE,8OAAC,+IAAY;;0BACX,8OAAC,mJAAO;gBAAC,UAAS;;;;;;0BAClB,8OAAC;;;;;;;;;;;AAGP"}}]
}